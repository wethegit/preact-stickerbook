{"id":"fpMm","dependencies":[{"name":"/home/liamegan/projects/wtc/preact-stickerbook/package.json","includedInParent":true,"mtime":1679503664025},{"name":"wtc-simplegl","loc":{"line":1,"column":65,"index":65},"parent":"/home/liamegan/projects/wtc/preact-stickerbook/src/renderSticker.js","resolved":"/home/liamegan/projects/wtc/preact-stickerbook/node_modules/wtc-simplegl/lib/index.js"},{"name":"wtc-math","loc":{"line":2,"column":57,"index":138},"parent":"/home/liamegan/projects/wtc/preact-stickerbook/src/renderSticker.js","resolved":"/home/liamegan/projects/wtc/preact-stickerbook/node_modules/wtc-math/dist/index.module.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.renderSticker=void 0;var e=require(\"wtc-simplegl\"),n=require(\"wtc-math\");console.clear();const t=\"#version 300 es\\n\\nin vec2 position;\\nin vec2 uv;\\nout vec2 v_uv;\\nuniform vec2 u_resolution;\\nuniform mat3 u_transform;\\nvoid main() {\\n  v_uv = uv;\\n  \\n  vec2 pos = (vec3(position, 1) * u_transform).xy;\\n  \\n  // gl_Position = vec4(position, 0, 1);\\n  gl_Position = vec4(pos / u_resolution * 2., 0, 1);\\n}\",i=\"#version 300 es\\nprecision highp float;\\nin vec2 v_uv;\\nout vec4 color;\\nuniform sampler2D s_main;\\nvoid main() {\\n  vec2 uv = v_uv;\\n  \\n  color = texture(s_main, uv);\\n}\",r={};let o;function a(e){return 0==(e&e-1)}const s=e=>{let t=r.canvas;if(!0!==r.initialized){const e=(t=document.createElement(\"canvas\")).getContext(\"webgl2\",{alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!0});e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.clearColor(0,0,0,0),r.canvas=t,r.gl=e,document.body.appendChild(t),l(e),r.renderer.bindVAOs(),r.initialized=!0}return t.height=e.width,t.width=e.height,o=new n.Vec2(t.width,t.height),t},c=(t,i)=>{s(i);const a=r.gl,c=r.canvas,l=(0,e.createTexture)(a,{img:t.image}),v=new n.Vec2(t.image.width,t.image.height),d=new n.Mat3(v.width,0,0,0,v.height,0,0,0,1),h=t.position.clone();h.y=1-h.y,h.scale(c.width).subtract(o.scaleNew(.5));const m=t.scale*c.width/Math.min(v.x,v.y)/.5;let _=t.rotation,p=new n.Mat3(Math.cos(_),Math.sin(_),0,-Math.sin(_),Math.cos(_),0,0,0,1);const g=new n.Mat3(m,0,h.x,0,m,h.y,0,0,1),w=d.multiply(p).multiplyNew(g);return console.log(w.array),u(a,0,l,{u_transform:w.array}),r.canvas};exports.renderSticker=c;const l=n=>{const o=new Float32Array([-.5,-.5,.5,-.5,.5,.5,.5,.5,-.5,.5,-.5,-.5]),a=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0]);r.renderer=(0,e.createRenderer)(n,{vert:t,frag:i,attributes:{position:{data:o,size:2},uv:{data:a,size:2}},count:6})},u=(e,n,t,i)=>{e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),r.renderer.bindUniform(\"s_main\",0),r.renderer.bindUniform(\"u_time\",.001*n),r.renderer.bindUniform(\"u_resolution\",[e.canvas.width,e.canvas.height]);for(let o in i)r.renderer.bindUniform(o,i[o]);r.renderer.render({width:e.canvas.width,height:e.canvas.height})};"},"sourceMaps":{"js":{"mappings":[{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":0}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":13}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":20}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":35}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":43}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":56}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":57}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":64}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":68}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":76}},{"source":"renderSticker.js","original":{"line":162,"column":1},"generated":{"line":1,"column":95}},{"source":"renderSticker.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"renderSticker.js","name":"_wtcSimplegl","original":{"line":1,"column":0},"generated":{"line":1,"column":101}},{"source":"renderSticker.js","name":"require","original":{"line":1,"column":0},"generated":{"line":1,"column":103}},{"source":"renderSticker.js","original":{"line":1,"column":0},"generated":{"line":1,"column":111}},{"source":"renderSticker.js","name":"_wtcMath","original":{"line":2,"column":0},"generated":{"line":1,"column":127}},{"source":"renderSticker.js","name":"require","original":{"line":2,"column":0},"generated":{"line":1,"column":129}},{"source":"renderSticker.js","original":{"line":2,"column":0},"generated":{"line":1,"column":137}},{"source":"renderSticker.js","name":"console","original":{"line":4,"column":0},"generated":{"line":1,"column":149}},{"source":"renderSticker.js","name":"clear","original":{"line":4,"column":8},"generated":{"line":1,"column":157}},{"source":"renderSticker.js","original":{"line":6,"column":0},"generated":{"line":1,"column":165}},{"source":"renderSticker.js","name":"vert","original":{"line":6,"column":6},"generated":{"line":1,"column":171}},{"source":"renderSticker.js","original":{"line":6,"column":14},"generated":{"line":1,"column":173}},{"source":"renderSticker.js","name":"frag","original":{"line":21,"column":6},"generated":{"line":1,"column":484}},{"source":"renderSticker.js","original":{"line":21,"column":14},"generated":{"line":1,"column":486}},{"source":"renderSticker.js","name":"components","original":{"line":32,"column":6},"generated":{"line":1,"column":660}},{"source":"renderSticker.js","original":{"line":32,"column":19},"generated":{"line":1,"column":662}},{"source":"renderSticker.js","original":{"line":33,"column":0},"generated":{"line":1,"column":665}},{"source":"renderSticker.js","name":"dims","original":{"line":33,"column":4},"generated":{"line":1,"column":669}},{"source":"renderSticker.js","original":{"line":35,"column":0},"generated":{"line":1,"column":671}},{"source":"renderSticker.js","name":"isPowerOf2","original":{"line":35,"column":9},"generated":{"line":1,"column":680}},{"source":"renderSticker.js","name":"value","original":{"line":35,"column":20},"generated":{"line":1,"column":682}},{"source":"renderSticker.js","original":{"line":36,"column":2},"generated":{"line":1,"column":685}},{"source":"renderSticker.js","original":{"line":36,"column":35},"generated":{"line":1,"column":692}},{"source":"renderSticker.js","name":"value","original":{"line":36,"column":10},"generated":{"line":1,"column":696}},{"source":"renderSticker.js","name":"value","original":{"line":36,"column":19},"generated":{"line":1,"column":698}},{"source":"renderSticker.js","original":{"line":36,"column":27},"generated":{"line":1,"column":700}},{"source":"renderSticker.js","original":{"line":39,"column":0},"generated":{"line":1,"column":703}},{"source":"renderSticker.js","name":"initApplication","original":{"line":39,"column":6},"generated":{"line":1,"column":709}},{"source":"renderSticker.js","name":"size","original":{"line":39,"column":25},"generated":{"line":1,"column":711}},{"source":"renderSticker.js","original":{"line":40,"column":2},"generated":{"line":1,"column":715}},{"source":"renderSticker.js","name":"c","original":{"line":40,"column":6},"generated":{"line":1,"column":719}},{"source":"renderSticker.js","name":"components","original":{"line":40,"column":10},"generated":{"line":1,"column":721}},{"source":"renderSticker.js","name":"canvas","original":{"line":40,"column":21},"generated":{"line":1,"column":723}},{"source":"renderSticker.js","original":{"line":41,"column":2},"generated":{"line":1,"column":730}},{"source":"renderSticker.js","original":{"line":41,"column":33},"generated":{"line":1,"column":734}},{"source":"renderSticker.js","name":"components","original":{"line":41,"column":6},"generated":{"line":1,"column":738}},{"source":"renderSticker.js","name":"initialized","original":{"line":41,"column":17},"generated":{"line":1,"column":740}},{"source":"renderSticker.js","original":{"line":41,"column":39},"generated":{"line":1,"column":752}},{"source":"renderSticker.js","original":{"line":43,"column":4},"generated":{"line":1,"column":753}},{"source":"renderSticker.js","name":"gl","original":{"line":43,"column":10},"generated":{"line":1,"column":759}},{"source":"renderSticker.js","name":"c","original":{"line":42,"column":4},"generated":{"line":1,"column":762}},{"source":"renderSticker.js","name":"document","original":{"line":42,"column":8},"generated":{"line":1,"column":764}},{"source":"renderSticker.js","name":"createElement","original":{"line":42,"column":17},"generated":{"line":1,"column":773}},{"source":"renderSticker.js","original":{"line":42,"column":31},"generated":{"line":1,"column":787}},{"source":"renderSticker.js","name":"getContext","original":{"line":43,"column":17},"generated":{"line":1,"column":798}},{"source":"renderSticker.js","original":{"line":43,"column":28},"generated":{"line":1,"column":809}},{"source":"renderSticker.js","original":{"line":43,"column":38},"generated":{"line":1,"column":818}},{"source":"renderSticker.js","name":"alpha","original":{"line":44,"column":6},"generated":{"line":1,"column":819}},{"source":"renderSticker.js","original":{"line":44,"column":13},"generated":{"line":1,"column":826}},{"source":"renderSticker.js","name":"premultipliedAlpha","original":{"line":45,"column":6},"generated":{"line":1,"column":828}},{"source":"renderSticker.js","original":{"line":45,"column":26},"generated":{"line":1,"column":848}},{"source":"renderSticker.js","name":"preserveDrawingBuffer","original":{"line":46,"column":6},"generated":{"line":1,"column":850}},{"source":"renderSticker.js","original":{"line":46,"column":29},"generated":{"line":1,"column":873}},{"source":"renderSticker.js","name":"gl","original":{"line":48,"column":4},"generated":{"line":1,"column":877}},{"source":"renderSticker.js","name":"pixelStorei","original":{"line":48,"column":7},"generated":{"line":1,"column":879}},{"source":"renderSticker.js","name":"gl","original":{"line":48,"column":19},"generated":{"line":1,"column":891}},{"source":"renderSticker.js","name":"UNPACK_FLIP_Y_WEBGL","original":{"line":48,"column":22},"generated":{"line":1,"column":893}},{"source":"renderSticker.js","original":{"line":48,"column":43},"generated":{"line":1,"column":914}},{"source":"renderSticker.js","name":"gl","original":{"line":49,"column":4},"generated":{"line":1,"column":917}},{"source":"renderSticker.js","name":"clearColor","original":{"line":49,"column":7},"generated":{"line":1,"column":919}},{"source":"renderSticker.js","original":{"line":49,"column":18},"generated":{"line":1,"column":930}},{"source":"renderSticker.js","original":{"line":49,"column":21},"generated":{"line":1,"column":932}},{"source":"renderSticker.js","original":{"line":49,"column":24},"generated":{"line":1,"column":934}},{"source":"renderSticker.js","original":{"line":49,"column":27},"generated":{"line":1,"column":936}},{"source":"renderSticker.js","name":"components","original":{"line":51,"column":4},"generated":{"line":1,"column":939}},{"source":"renderSticker.js","name":"canvas","original":{"line":51,"column":15},"generated":{"line":1,"column":941}},{"source":"renderSticker.js","name":"c","original":{"line":51,"column":24},"generated":{"line":1,"column":948}},{"source":"renderSticker.js","name":"components","original":{"line":52,"column":4},"generated":{"line":1,"column":950}},{"source":"renderSticker.js","name":"gl","original":{"line":52,"column":15},"generated":{"line":1,"column":952}},{"source":"renderSticker.js","name":"gl","original":{"line":52,"column":20},"generated":{"line":1,"column":955}},{"source":"renderSticker.js","name":"document","original":{"line":54,"column":4},"generated":{"line":1,"column":957}},{"source":"renderSticker.js","name":"body","original":{"line":54,"column":13},"generated":{"line":1,"column":966}},{"source":"renderSticker.js","name":"appendChild","original":{"line":54,"column":18},"generated":{"line":1,"column":971}},{"source":"renderSticker.js","name":"c","original":{"line":54,"column":30},"generated":{"line":1,"column":983}},{"source":"renderSticker.js","name":"initProgram","original":{"line":56,"column":4},"generated":{"line":1,"column":986}},{"source":"renderSticker.js","name":"gl","original":{"line":56,"column":16},"generated":{"line":1,"column":988}},{"source":"renderSticker.js","name":"components","original":{"line":57,"column":4},"generated":{"line":1,"column":991}},{"source":"renderSticker.js","name":"renderer","original":{"line":57,"column":15},"generated":{"line":1,"column":993}},{"source":"renderSticker.js","name":"bindVAOs","original":{"line":57,"column":24},"generated":{"line":1,"column":1002}},{"source":"renderSticker.js","name":"components","original":{"line":59,"column":4},"generated":{"line":1,"column":1013}},{"source":"renderSticker.js","name":"initialized","original":{"line":59,"column":15},"generated":{"line":1,"column":1015}},{"source":"renderSticker.js","original":{"line":59,"column":29},"generated":{"line":1,"column":1028}},{"source":"renderSticker.js","original":{"line":65,"column":2},"generated":{"line":1,"column":1030}},{"source":"renderSticker.js","name":"c","original":{"line":61,"column":2},"generated":{"line":1,"column":1037}},{"source":"renderSticker.js","name":"height","original":{"line":61,"column":4},"generated":{"line":1,"column":1039}},{"source":"renderSticker.js","name":"size","original":{"line":61,"column":13},"generated":{"line":1,"column":1046}},{"source":"renderSticker.js","name":"width","original":{"line":61,"column":18},"generated":{"line":1,"column":1048}},{"source":"renderSticker.js","name":"c","original":{"line":62,"column":2},"generated":{"line":1,"column":1054}},{"source":"renderSticker.js","name":"width","original":{"line":62,"column":4},"generated":{"line":1,"column":1056}},{"source":"renderSticker.js","name":"size","original":{"line":62,"column":12},"generated":{"line":1,"column":1062}},{"source":"renderSticker.js","name":"height","original":{"line":62,"column":17},"generated":{"line":1,"column":1064}},{"source":"renderSticker.js","name":"dims","original":{"line":63,"column":2},"generated":{"line":1,"column":1071}},{"source":"renderSticker.js","original":{"line":63,"column":9},"generated":{"line":1,"column":1073}},{"source":"renderSticker.js","name":"Vec2","original":{"line":63,"column":13},"generated":{"line":1,"column":1077}},{"source":"renderSticker.js","original":{"line":63,"column":17},"generated":{"line":1,"column":1079}},{"source":"renderSticker.js","name":"c","original":{"line":63,"column":18},"generated":{"line":1,"column":1084}},{"source":"renderSticker.js","name":"width","original":{"line":63,"column":20},"generated":{"line":1,"column":1086}},{"source":"renderSticker.js","name":"c","original":{"line":63,"column":27},"generated":{"line":1,"column":1092}},{"source":"renderSticker.js","name":"height","original":{"line":63,"column":29},"generated":{"line":1,"column":1094}},{"source":"renderSticker.js","name":"c","original":{"line":65,"column":9},"generated":{"line":1,"column":1102}},{"source":"renderSticker.js","name":"renderSticker","original":{"line":67,"column":6},"generated":{"line":1,"column":1105}},{"source":"renderSticker.js","name":"renderSticker","original":{"line":67,"column":22},"generated":{"line":1,"column":1107}},{"source":"renderSticker.js","name":"sticker","original":{"line":67,"column":23},"generated":{"line":1,"column":1108}},{"source":"renderSticker.js","name":"canvasSize","original":{"line":67,"column":32},"generated":{"line":1,"column":1110}},{"source":"renderSticker.js","name":"initApplication","original":{"line":68,"column":2},"generated":{"line":1,"column":1115}},{"source":"renderSticker.js","name":"canvasSize","original":{"line":68,"column":18},"generated":{"line":1,"column":1117}},{"source":"renderSticker.js","original":{"line":70,"column":2},"generated":{"line":1,"column":1120}},{"source":"renderSticker.js","name":"gl","original":{"line":70,"column":8},"generated":{"line":1,"column":1126}},{"source":"renderSticker.js","name":"components","original":{"line":70,"column":13},"generated":{"line":1,"column":1128}},{"source":"renderSticker.js","name":"gl","original":{"line":70,"column":24},"generated":{"line":1,"column":1130}},{"source":"renderSticker.js","name":"c","original":{"line":71,"column":8},"generated":{"line":1,"column":1133}},{"source":"renderSticker.js","name":"components","original":{"line":71,"column":12},"generated":{"line":1,"column":1135}},{"source":"renderSticker.js","name":"canvas","original":{"line":71,"column":23},"generated":{"line":1,"column":1137}},{"source":"renderSticker.js","name":"texture","original":{"line":73,"column":8},"generated":{"line":1,"column":1144}},{"source":"renderSticker.js","original":{"line":73,"column":18},"generated":{"line":1,"column":1147}},{"source":"renderSticker.js","name":"createTexture","original":{"line":73,"column":18},"generated":{"line":1,"column":1149}},{"source":"renderSticker.js","original":{"line":73,"column":31},"generated":{"line":1,"column":1151}},{"source":"renderSticker.js","name":"gl","original":{"line":73,"column":32},"generated":{"line":1,"column":1166}},{"source":"renderSticker.js","original":{"line":73,"column":36},"generated":{"line":1,"column":1168}},{"source":"renderSticker.js","name":"img","original":{"line":73,"column":38},"generated":{"line":1,"column":1169}},{"source":"renderSticker.js","name":"sticker","original":{"line":73,"column":43},"generated":{"line":1,"column":1173}},{"source":"renderSticker.js","name":"image","original":{"line":73,"column":51},"generated":{"line":1,"column":1175}},{"source":"renderSticker.js","name":"d","original":{"line":75,"column":8},"generated":{"line":1,"column":1183}},{"source":"renderSticker.js","original":{"line":75,"column":12},"generated":{"line":1,"column":1185}},{"source":"renderSticker.js","name":"Vec2","original":{"line":75,"column":16},"generated":{"line":1,"column":1189}},{"source":"renderSticker.js","original":{"line":75,"column":20},"generated":{"line":1,"column":1191}},{"source":"renderSticker.js","name":"sticker","original":{"line":75,"column":21},"generated":{"line":1,"column":1196}},{"source":"renderSticker.js","name":"image","original":{"line":75,"column":29},"generated":{"line":1,"column":1198}},{"source":"renderSticker.js","name":"width","original":{"line":75,"column":35},"generated":{"line":1,"column":1204}},{"source":"renderSticker.js","name":"sticker","original":{"line":75,"column":42},"generated":{"line":1,"column":1210}},{"source":"renderSticker.js","name":"image","original":{"line":75,"column":50},"generated":{"line":1,"column":1212}},{"source":"renderSticker.js","name":"height","original":{"line":75,"column":56},"generated":{"line":1,"column":1218}},{"source":"renderSticker.js","name":"size","original":{"line":76,"column":8},"generated":{"line":1,"column":1226}},{"source":"renderSticker.js","original":{"line":76,"column":15},"generated":{"line":1,"column":1228}},{"source":"renderSticker.js","name":"Mat3","original":{"line":76,"column":19},"generated":{"line":1,"column":1232}},{"source":"renderSticker.js","original":{"line":76,"column":23},"generated":{"line":1,"column":1234}},{"source":"renderSticker.js","name":"d","original":{"line":76,"column":24},"generated":{"line":1,"column":1239}},{"source":"renderSticker.js","name":"width","original":{"line":76,"column":26},"generated":{"line":1,"column":1241}},{"source":"renderSticker.js","original":{"line":76,"column":33},"generated":{"line":1,"column":1247}},{"source":"renderSticker.js","original":{"line":76,"column":36},"generated":{"line":1,"column":1249}},{"source":"renderSticker.js","original":{"line":76,"column":39},"generated":{"line":1,"column":1251}},{"source":"renderSticker.js","name":"d","original":{"line":76,"column":42},"generated":{"line":1,"column":1253}},{"source":"renderSticker.js","name":"height","original":{"line":76,"column":44},"generated":{"line":1,"column":1255}},{"source":"renderSticker.js","original":{"line":76,"column":52},"generated":{"line":1,"column":1262}},{"source":"renderSticker.js","original":{"line":76,"column":55},"generated":{"line":1,"column":1264}},{"source":"renderSticker.js","original":{"line":76,"column":58},"generated":{"line":1,"column":1266}},{"source":"renderSticker.js","original":{"line":76,"column":61},"generated":{"line":1,"column":1268}},{"source":"renderSticker.js","name":"position","original":{"line":78,"column":8},"generated":{"line":1,"column":1271}},{"source":"renderSticker.js","name":"sticker","original":{"line":78,"column":19},"generated":{"line":1,"column":1273}},{"source":"renderSticker.js","name":"position","original":{"line":78,"column":27},"generated":{"line":1,"column":1275}},{"source":"renderSticker.js","name":"clone","original":{"line":78,"column":36},"generated":{"line":1,"column":1284}},{"source":"renderSticker.js","name":"position","original":{"line":79,"column":2},"generated":{"line":1,"column":1292}},{"source":"renderSticker.js","name":"y","original":{"line":79,"column":11},"generated":{"line":1,"column":1294}},{"source":"renderSticker.js","original":{"line":79,"column":15},"generated":{"line":1,"column":1296}},{"source":"renderSticker.js","name":"position","original":{"line":79,"column":19},"generated":{"line":1,"column":1298}},{"source":"renderSticker.js","name":"y","original":{"line":79,"column":28},"generated":{"line":1,"column":1300}},{"source":"renderSticker.js","name":"position","original":{"line":80,"column":2},"generated":{"line":1,"column":1302}},{"source":"renderSticker.js","name":"scale","original":{"line":80,"column":11},"generated":{"line":1,"column":1304}},{"source":"renderSticker.js","name":"c","original":{"line":80,"column":17},"generated":{"line":1,"column":1310}},{"source":"renderSticker.js","name":"width","original":{"line":80,"column":19},"generated":{"line":1,"column":1312}},{"source":"renderSticker.js","name":"subtract","original":{"line":80,"column":26},"generated":{"line":1,"column":1319}},{"source":"renderSticker.js","name":"dims","original":{"line":80,"column":35},"generated":{"line":1,"column":1328}},{"source":"renderSticker.js","name":"scaleNew","original":{"line":80,"column":40},"generated":{"line":1,"column":1330}},{"source":"renderSticker.js","original":{"line":80,"column":49},"generated":{"line":1,"column":1339}},{"source":"renderSticker.js","original":{"line":81,"column":2},"generated":{"line":1,"column":1344}},{"source":"renderSticker.js","name":"scale","original":{"line":81,"column":8},"generated":{"line":1,"column":1350}},{"source":"renderSticker.js","name":"sticker","original":{"line":81,"column":17},"generated":{"line":1,"column":1352}},{"source":"renderSticker.js","name":"scale","original":{"line":81,"column":25},"generated":{"line":1,"column":1354}},{"source":"renderSticker.js","name":"c","original":{"line":81,"column":33},"generated":{"line":1,"column":1360}},{"source":"renderSticker.js","name":"width","original":{"line":81,"column":35},"generated":{"line":1,"column":1362}},{"source":"renderSticker.js","name":"Math","original":{"line":81,"column":44},"generated":{"line":1,"column":1368}},{"source":"renderSticker.js","name":"min","original":{"line":81,"column":49},"generated":{"line":1,"column":1373}},{"source":"renderSticker.js","name":"d","original":{"line":81,"column":53},"generated":{"line":1,"column":1377}},{"source":"renderSticker.js","name":"x","original":{"line":81,"column":55},"generated":{"line":1,"column":1379}},{"source":"renderSticker.js","name":"d","original":{"line":81,"column":58},"generated":{"line":1,"column":1381}},{"source":"renderSticker.js","name":"y","original":{"line":81,"column":60},"generated":{"line":1,"column":1383}},{"source":"renderSticker.js","original":{"line":81,"column":65},"generated":{"line":1,"column":1386}},{"source":"renderSticker.js","original":{"line":82,"column":2},"generated":{"line":1,"column":1389}},{"source":"renderSticker.js","name":"a","original":{"line":82,"column":6},"generated":{"line":1,"column":1393}},{"source":"renderSticker.js","name":"sticker","original":{"line":82,"column":10},"generated":{"line":1,"column":1395}},{"source":"renderSticker.js","name":"rotation","original":{"line":82,"column":18},"generated":{"line":1,"column":1397}},{"source":"renderSticker.js","name":"rotation","original":{"line":83,"column":6},"generated":{"line":1,"column":1406}},{"source":"renderSticker.js","original":{"line":83,"column":17},"generated":{"line":1,"column":1408}},{"source":"renderSticker.js","name":"Mat3","original":{"line":83,"column":21},"generated":{"line":1,"column":1412}},{"source":"renderSticker.js","original":{"line":83,"column":25},"generated":{"line":1,"column":1414}},{"source":"renderSticker.js","name":"Math","original":{"line":84,"column":4},"generated":{"line":1,"column":1419}},{"source":"renderSticker.js","name":"cos","original":{"line":84,"column":9},"generated":{"line":1,"column":1424}},{"source":"renderSticker.js","name":"a","original":{"line":84,"column":13},"generated":{"line":1,"column":1428}},{"source":"renderSticker.js","name":"Math","original":{"line":85,"column":4},"generated":{"line":1,"column":1431}},{"source":"renderSticker.js","name":"sin","original":{"line":85,"column":9},"generated":{"line":1,"column":1436}},{"source":"renderSticker.js","name":"a","original":{"line":85,"column":13},"generated":{"line":1,"column":1440}},{"source":"renderSticker.js","original":{"line":86,"column":4},"generated":{"line":1,"column":1443}},{"source":"renderSticker.js","name":"Math","original":{"line":87,"column":5},"generated":{"line":1,"column":1446}},{"source":"renderSticker.js","name":"sin","original":{"line":87,"column":10},"generated":{"line":1,"column":1451}},{"source":"renderSticker.js","name":"a","original":{"line":87,"column":14},"generated":{"line":1,"column":1455}},{"source":"renderSticker.js","name":"Math","original":{"line":88,"column":4},"generated":{"line":1,"column":1458}},{"source":"renderSticker.js","name":"cos","original":{"line":88,"column":9},"generated":{"line":1,"column":1463}},{"source":"renderSticker.js","name":"a","original":{"line":88,"column":13},"generated":{"line":1,"column":1467}},{"source":"renderSticker.js","original":{"line":89,"column":4},"generated":{"line":1,"column":1470}},{"source":"renderSticker.js","original":{"line":90,"column":4},"generated":{"line":1,"column":1472}},{"source":"renderSticker.js","original":{"line":91,"column":4},"generated":{"line":1,"column":1474}},{"source":"renderSticker.js","original":{"line":92,"column":4},"generated":{"line":1,"column":1476}},{"source":"renderSticker.js","original":{"line":95,"column":2},"generated":{"line":1,"column":1479}},{"source":"renderSticker.js","name":"transform","original":{"line":95,"column":8},"generated":{"line":1,"column":1485}},{"source":"renderSticker.js","original":{"line":95,"column":20},"generated":{"line":1,"column":1487}},{"source":"renderSticker.js","name":"Mat3","original":{"line":95,"column":24},"generated":{"line":1,"column":1491}},{"source":"renderSticker.js","original":{"line":95,"column":28},"generated":{"line":1,"column":1493}},{"source":"renderSticker.js","name":"scale","original":{"line":96,"column":4},"generated":{"line":1,"column":1498}},{"source":"renderSticker.js","original":{"line":97,"column":4},"generated":{"line":1,"column":1500}},{"source":"renderSticker.js","name":"position","original":{"line":98,"column":4},"generated":{"line":1,"column":1502}},{"source":"renderSticker.js","name":"x","original":{"line":98,"column":13},"generated":{"line":1,"column":1504}},{"source":"renderSticker.js","original":{"line":99,"column":4},"generated":{"line":1,"column":1506}},{"source":"renderSticker.js","name":"scale","original":{"line":100,"column":4},"generated":{"line":1,"column":1508}},{"source":"renderSticker.js","name":"position","original":{"line":101,"column":4},"generated":{"line":1,"column":1510}},{"source":"renderSticker.js","name":"y","original":{"line":101,"column":13},"generated":{"line":1,"column":1512}},{"source":"renderSticker.js","original":{"line":102,"column":4},"generated":{"line":1,"column":1514}},{"source":"renderSticker.js","original":{"line":103,"column":4},"generated":{"line":1,"column":1516}},{"source":"renderSticker.js","original":{"line":104,"column":4},"generated":{"line":1,"column":1518}},{"source":"renderSticker.js","name":"sizeTransformationMatrix","original":{"line":106,"column":8},"generated":{"line":1,"column":1521}},{"source":"renderSticker.js","name":"size","original":{"line":106,"column":35},"generated":{"line":1,"column":1523}},{"source":"renderSticker.js","name":"multiply","original":{"line":107,"column":5},"generated":{"line":1,"column":1525}},{"source":"renderSticker.js","name":"rotation","original":{"line":107,"column":14},"generated":{"line":1,"column":1534}},{"source":"renderSticker.js","name":"multiplyNew","original":{"line":108,"column":5},"generated":{"line":1,"column":1537}},{"source":"renderSticker.js","name":"transform","original":{"line":108,"column":17},"generated":{"line":1,"column":1549}},{"source":"renderSticker.js","original":{"line":117,"column":2},"generated":{"line":1,"column":1552}},{"source":"renderSticker.js","name":"console","original":{"line":111,"column":2},"generated":{"line":1,"column":1559}},{"source":"renderSticker.js","name":"log","original":{"line":111,"column":10},"generated":{"line":1,"column":1567}},{"source":"renderSticker.js","name":"sizeTransformationMatrix","original":{"line":111,"column":14},"generated":{"line":1,"column":1571}},{"source":"renderSticker.js","name":"array","original":{"line":111,"column":39},"generated":{"line":1,"column":1573}},{"source":"renderSticker.js","name":"renderProgram","original":{"line":113,"column":2},"generated":{"line":1,"column":1580}},{"source":"renderSticker.js","name":"gl","original":{"line":113,"column":16},"generated":{"line":1,"column":1582}},{"source":"renderSticker.js","original":{"line":113,"column":20},"generated":{"line":1,"column":1584}},{"source":"renderSticker.js","name":"texture","original":{"line":113,"column":23},"generated":{"line":1,"column":1586}},{"source":"renderSticker.js","original":{"line":113,"column":32},"generated":{"line":1,"column":1588}},{"source":"renderSticker.js","name":"u_transform","original":{"line":114,"column":4},"generated":{"line":1,"column":1589}},{"source":"renderSticker.js","name":"sizeTransformationMatrix","original":{"line":114,"column":17},"generated":{"line":1,"column":1601}},{"source":"renderSticker.js","name":"array","original":{"line":114,"column":42},"generated":{"line":1,"column":1603}},{"source":"renderSticker.js","name":"components","original":{"line":117,"column":9},"generated":{"line":1,"column":1611}},{"source":"renderSticker.js","name":"canvas","original":{"line":117,"column":20},"generated":{"line":1,"column":1613}},{"source":"renderSticker.js","name":"exports","original":{"line":118,"column":2},"generated":{"line":1,"column":1621}},{"source":"renderSticker.js","name":"renderSticker","original":{"line":118,"column":2},"generated":{"line":1,"column":1629}},{"source":"renderSticker.js","name":"renderSticker","original":{"line":118,"column":2},"generated":{"line":1,"column":1643}},{"source":"renderSticker.js","original":{"line":120,"column":0},"generated":{"line":1,"column":1645}},{"source":"renderSticker.js","name":"initProgram","original":{"line":120,"column":6},"generated":{"line":1,"column":1651}},{"source":"renderSticker.js","name":"gl","original":{"line":120,"column":21},"generated":{"line":1,"column":1653}},{"source":"renderSticker.js","original":{"line":121,"column":2},"generated":{"line":1,"column":1657}},{"source":"renderSticker.js","name":"position","original":{"line":121,"column":8},"generated":{"line":1,"column":1663}},{"source":"renderSticker.js","original":{"line":121,"column":19},"generated":{"line":1,"column":1665}},{"source":"renderSticker.js","name":"Float32Array","original":{"line":121,"column":23},"generated":{"line":1,"column":1669}},{"source":"renderSticker.js","original":{"line":121,"column":36},"generated":{"line":1,"column":1682}},{"source":"renderSticker.js","original":{"line":122,"column":5},"generated":{"line":1,"column":1684}},{"source":"renderSticker.js","original":{"line":122,"column":11},"generated":{"line":1,"column":1688}},{"source":"renderSticker.js","original":{"line":122,"column":16},"generated":{"line":1,"column":1691}},{"source":"renderSticker.js","original":{"line":122,"column":22},"generated":{"line":1,"column":1695}},{"source":"renderSticker.js","original":{"line":122,"column":27},"generated":{"line":1,"column":1698}},{"source":"renderSticker.js","original":{"line":122,"column":32},"generated":{"line":1,"column":1701}},{"source":"renderSticker.js","original":{"line":124,"column":4},"generated":{"line":1,"column":1704}},{"source":"renderSticker.js","original":{"line":124,"column":9},"generated":{"line":1,"column":1707}},{"source":"renderSticker.js","original":{"line":124,"column":15},"generated":{"line":1,"column":1711}},{"source":"renderSticker.js","original":{"line":124,"column":20},"generated":{"line":1,"column":1714}},{"source":"renderSticker.js","original":{"line":124,"column":26},"generated":{"line":1,"column":1718}},{"source":"renderSticker.js","original":{"line":124,"column":32},"generated":{"line":1,"column":1722}},{"source":"renderSticker.js","name":"uvs","original":{"line":126,"column":8},"generated":{"line":1,"column":1727}},{"source":"renderSticker.js","original":{"line":126,"column":14},"generated":{"line":1,"column":1729}},{"source":"renderSticker.js","name":"Float32Array","original":{"line":126,"column":18},"generated":{"line":1,"column":1733}},{"source":"renderSticker.js","original":{"line":126,"column":31},"generated":{"line":1,"column":1746}},{"source":"renderSticker.js","original":{"line":126,"column":32},"generated":{"line":1,"column":1747}},{"source":"renderSticker.js","original":{"line":126,"column":35},"generated":{"line":1,"column":1749}},{"source":"renderSticker.js","original":{"line":126,"column":38},"generated":{"line":1,"column":1751}},{"source":"renderSticker.js","original":{"line":126,"column":41},"generated":{"line":1,"column":1753}},{"source":"renderSticker.js","original":{"line":126,"column":44},"generated":{"line":1,"column":1755}},{"source":"renderSticker.js","original":{"line":126,"column":47},"generated":{"line":1,"column":1757}},{"source":"renderSticker.js","original":{"line":126,"column":50},"generated":{"line":1,"column":1759}},{"source":"renderSticker.js","original":{"line":126,"column":53},"generated":{"line":1,"column":1761}},{"source":"renderSticker.js","original":{"line":126,"column":56},"generated":{"line":1,"column":1763}},{"source":"renderSticker.js","original":{"line":126,"column":59},"generated":{"line":1,"column":1765}},{"source":"renderSticker.js","original":{"line":126,"column":62},"generated":{"line":1,"column":1767}},{"source":"renderSticker.js","original":{"line":126,"column":65},"generated":{"line":1,"column":1769}},{"source":"renderSticker.js","name":"components","original":{"line":128,"column":2},"generated":{"line":1,"column":1773}},{"source":"renderSticker.js","name":"renderer","original":{"line":128,"column":13},"generated":{"line":1,"column":1775}},{"source":"renderSticker.js","original":{"line":128,"column":24},"generated":{"line":1,"column":1785}},{"source":"renderSticker.js","name":"createRenderer","original":{"line":128,"column":24},"generated":{"line":1,"column":1787}},{"source":"renderSticker.js","original":{"line":128,"column":38},"generated":{"line":1,"column":1789}},{"source":"renderSticker.js","name":"gl","original":{"line":128,"column":39},"generated":{"line":1,"column":1805}},{"source":"renderSticker.js","original":{"line":128,"column":43},"generated":{"line":1,"column":1807}},{"source":"renderSticker.js","name":"vert","original":{"line":129,"column":4},"generated":{"line":1,"column":1808}},{"source":"renderSticker.js","name":"vert","original":{"line":129,"column":4},"generated":{"line":1,"column":1813}},{"source":"renderSticker.js","name":"frag","original":{"line":130,"column":4},"generated":{"line":1,"column":1815}},{"source":"renderSticker.js","name":"frag","original":{"line":130,"column":4},"generated":{"line":1,"column":1820}},{"source":"renderSticker.js","name":"attributes","original":{"line":131,"column":4},"generated":{"line":1,"column":1822}},{"source":"renderSticker.js","original":{"line":131,"column":16},"generated":{"line":1,"column":1833}},{"source":"renderSticker.js","name":"position","original":{"line":132,"column":6},"generated":{"line":1,"column":1834}},{"source":"renderSticker.js","original":{"line":132,"column":16},"generated":{"line":1,"column":1843}},{"source":"renderSticker.js","name":"data","original":{"line":132,"column":18},"generated":{"line":1,"column":1844}},{"source":"renderSticker.js","name":"position","original":{"line":132,"column":24},"generated":{"line":1,"column":1849}},{"source":"renderSticker.js","name":"size","original":{"line":132,"column":34},"generated":{"line":1,"column":1851}},{"source":"renderSticker.js","original":{"line":132,"column":40},"generated":{"line":1,"column":1856}},{"source":"renderSticker.js","name":"uv","original":{"line":133,"column":6},"generated":{"line":1,"column":1859}},{"source":"renderSticker.js","original":{"line":133,"column":10},"generated":{"line":1,"column":1862}},{"source":"renderSticker.js","name":"data","original":{"line":133,"column":12},"generated":{"line":1,"column":1863}},{"source":"renderSticker.js","name":"uvs","original":{"line":133,"column":18},"generated":{"line":1,"column":1868}},{"source":"renderSticker.js","name":"size","original":{"line":133,"column":23},"generated":{"line":1,"column":1870}},{"source":"renderSticker.js","original":{"line":133,"column":29},"generated":{"line":1,"column":1875}},{"source":"renderSticker.js","name":"count","original":{"line":135,"column":4},"generated":{"line":1,"column":1879}},{"source":"renderSticker.js","original":{"line":135,"column":11},"generated":{"line":1,"column":1885}},{"source":"renderSticker.js","name":"renderProgram","original":{"line":139,"column":6},"generated":{"line":1,"column":1890}},{"source":"renderSticker.js","name":"renderProgram","original":{"line":139,"column":22},"generated":{"line":1,"column":1892}},{"source":"renderSticker.js","name":"gl","original":{"line":139,"column":23},"generated":{"line":1,"column":1893}},{"source":"renderSticker.js","name":"delta","original":{"line":139,"column":27},"generated":{"line":1,"column":1895}},{"source":"renderSticker.js","name":"texture","original":{"line":139,"column":34},"generated":{"line":1,"column":1897}},{"source":"renderSticker.js","name":"uniforms","original":{"line":139,"column":43},"generated":{"line":1,"column":1899}},{"source":"renderSticker.js","name":"gl","original":{"line":142,"column":2},"generated":{"line":1,"column":1904}},{"source":"renderSticker.js","name":"clear","original":{"line":142,"column":5},"generated":{"line":1,"column":1906}},{"source":"renderSticker.js","name":"gl","original":{"line":142,"column":11},"generated":{"line":1,"column":1912}},{"source":"renderSticker.js","name":"DEPTH_BUFFER_BIT","original":{"line":142,"column":14},"generated":{"line":1,"column":1914}},{"source":"renderSticker.js","name":"gl","original":{"line":142,"column":33},"generated":{"line":1,"column":1931}},{"source":"renderSticker.js","name":"COLOR_BUFFER_BIT","original":{"line":142,"column":36},"generated":{"line":1,"column":1933}},{"source":"renderSticker.js","name":"gl","original":{"line":145,"column":2},"generated":{"line":1,"column":1951}},{"source":"renderSticker.js","name":"activeTexture","original":{"line":145,"column":5},"generated":{"line":1,"column":1953}},{"source":"renderSticker.js","name":"gl","original":{"line":145,"column":19},"generated":{"line":1,"column":1967}},{"source":"renderSticker.js","name":"TEXTURE0","original":{"line":145,"column":22},"generated":{"line":1,"column":1969}},{"source":"renderSticker.js","name":"gl","original":{"line":146,"column":2},"generated":{"line":1,"column":1979}},{"source":"renderSticker.js","name":"bindTexture","original":{"line":146,"column":5},"generated":{"line":1,"column":1981}},{"source":"renderSticker.js","name":"gl","original":{"line":146,"column":17},"generated":{"line":1,"column":1993}},{"source":"renderSticker.js","name":"TEXTURE_2D","original":{"line":146,"column":20},"generated":{"line":1,"column":1995}},{"source":"renderSticker.js","name":"texture","original":{"line":146,"column":32},"generated":{"line":1,"column":2006}},{"source":"renderSticker.js","name":"components","original":{"line":149,"column":2},"generated":{"line":1,"column":2009}},{"source":"renderSticker.js","name":"renderer","original":{"line":149,"column":13},"generated":{"line":1,"column":2011}},{"source":"renderSticker.js","name":"bindUniform","original":{"line":149,"column":22},"generated":{"line":1,"column":2020}},{"source":"renderSticker.js","original":{"line":149,"column":34},"generated":{"line":1,"column":2032}},{"source":"renderSticker.js","original":{"line":149,"column":44},"generated":{"line":1,"column":2041}},{"source":"renderSticker.js","name":"components","original":{"line":150,"column":2},"generated":{"line":1,"column":2044}},{"source":"renderSticker.js","name":"renderer","original":{"line":150,"column":13},"generated":{"line":1,"column":2046}},{"source":"renderSticker.js","name":"bindUniform","original":{"line":150,"column":22},"generated":{"line":1,"column":2055}},{"source":"renderSticker.js","original":{"line":150,"column":34},"generated":{"line":1,"column":2067}},{"source":"renderSticker.js","original":{"line":150,"column":52},"generated":{"line":1,"column":2076}},{"source":"renderSticker.js","name":"delta","original":{"line":150,"column":44},"generated":{"line":1,"column":2081}},{"source":"renderSticker.js","name":"components","original":{"line":151,"column":2},"generated":{"line":1,"column":2084}},{"source":"renderSticker.js","name":"renderer","original":{"line":151,"column":13},"generated":{"line":1,"column":2086}},{"source":"renderSticker.js","name":"bindUniform","original":{"line":151,"column":22},"generated":{"line":1,"column":2095}},{"source":"renderSticker.js","original":{"line":151,"column":34},"generated":{"line":1,"column":2107}},{"source":"renderSticker.js","original":{"line":151,"column":50},"generated":{"line":1,"column":2122}},{"source":"renderSticker.js","name":"gl","original":{"line":152,"column":4},"generated":{"line":1,"column":2123}},{"source":"renderSticker.js","name":"canvas","original":{"line":152,"column":7},"generated":{"line":1,"column":2125}},{"source":"renderSticker.js","name":"width","original":{"line":152,"column":14},"generated":{"line":1,"column":2132}},{"source":"renderSticker.js","name":"gl","original":{"line":153,"column":4},"generated":{"line":1,"column":2138}},{"source":"renderSticker.js","name":"canvas","original":{"line":153,"column":7},"generated":{"line":1,"column":2140}},{"source":"renderSticker.js","name":"height","original":{"line":153,"column":14},"generated":{"line":1,"column":2147}},{"source":"renderSticker.js","original":{"line":155,"column":2},"generated":{"line":1,"column":2156}},{"source":"renderSticker.js","original":{"line":155,"column":7},"generated":{"line":1,"column":2160}},{"source":"renderSticker.js","name":"n","original":{"line":155,"column":11},"generated":{"line":1,"column":2164}},{"source":"renderSticker.js","name":"uniforms","original":{"line":155,"column":16},"generated":{"line":1,"column":2169}},{"source":"renderSticker.js","name":"components","original":{"line":155,"column":26},"generated":{"line":1,"column":2171}},{"source":"renderSticker.js","name":"renderer","original":{"line":155,"column":37},"generated":{"line":1,"column":2173}},{"source":"renderSticker.js","name":"bindUniform","original":{"line":155,"column":46},"generated":{"line":1,"column":2182}},{"source":"renderSticker.js","name":"n","original":{"line":155,"column":58},"generated":{"line":1,"column":2194}},{"source":"renderSticker.js","name":"uniforms","original":{"line":155,"column":61},"generated":{"line":1,"column":2196}},{"source":"renderSticker.js","name":"n","original":{"line":155,"column":70},"generated":{"line":1,"column":2198}},{"source":"renderSticker.js","name":"components","original":{"line":158,"column":2},"generated":{"line":1,"column":2202}},{"source":"renderSticker.js","name":"renderer","original":{"line":158,"column":13},"generated":{"line":1,"column":2204}},{"source":"renderSticker.js","name":"render","original":{"line":158,"column":22},"generated":{"line":1,"column":2213}},{"source":"renderSticker.js","original":{"line":158,"column":29},"generated":{"line":1,"column":2220}},{"source":"renderSticker.js","name":"width","original":{"line":159,"column":4},"generated":{"line":1,"column":2221}},{"source":"renderSticker.js","name":"gl","original":{"line":159,"column":11},"generated":{"line":1,"column":2227}},{"source":"renderSticker.js","name":"canvas","original":{"line":159,"column":14},"generated":{"line":1,"column":2229}},{"source":"renderSticker.js","name":"width","original":{"line":159,"column":21},"generated":{"line":1,"column":2236}},{"source":"renderSticker.js","name":"height","original":{"line":160,"column":4},"generated":{"line":1,"column":2242}},{"source":"renderSticker.js","name":"gl","original":{"line":160,"column":12},"generated":{"line":1,"column":2249}},{"source":"renderSticker.js","name":"canvas","original":{"line":160,"column":15},"generated":{"line":1,"column":2251}},{"source":"renderSticker.js","name":"height","original":{"line":160,"column":22},"generated":{"line":1,"column":2258}}],"sources":{"renderSticker.js":"import { createTexture, createRenderer, createFrameBuffer } from \"wtc-simplegl\";\nimport { Vec2, Vec3, Vec4, Mat2, Mat3, Mat4, Quat } from \"wtc-math\";\n\nconsole.clear();\n\nconst vert = `#version 300 es\n\nin vec2 position;\nin vec2 uv;\nout vec2 v_uv;\nuniform vec2 u_resolution;\nuniform mat3 u_transform;\nvoid main() {\n  v_uv = uv;\n  \n  vec2 pos = (vec3(position, 1) * u_transform).xy;\n  \n  // gl_Position = vec4(position, 0, 1);\n  gl_Position = vec4(pos / u_resolution * 2., 0, 1);\n}`;\nconst frag = `#version 300 es\nprecision highp float;\nin vec2 v_uv;\nout vec4 color;\nuniform sampler2D s_main;\nvoid main() {\n  vec2 uv = v_uv;\n  \n  color = texture(s_main, uv);\n}`;\n\nconst components = {};\nlet dims;\n\nfunction isPowerOf2(value) {\n  return (value & (value - 1)) === 0;\n}\n\nconst initApplication = (size) => {\n  let c = components.canvas;\n  if (components.initialized !== true) {\n    c = document.createElement(\"canvas\");\n    const gl = c.getContext(\"webgl2\", {\n      alpha: true,\n      premultipliedAlpha: false,\n      preserveDrawingBuffer: true,\n    });\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.clearColor(0, 0, 0, 0);\n\n    components.canvas = c;\n    components.gl = gl;\n\n    document.body.appendChild(c);\n\n    initProgram(gl);\n    components.renderer.bindVAOs();\n\n    components.initialized = true;\n  }\n  c.height = size.width;\n  c.width = size.height;\n  dims = new Vec2(c.width, c.height);\n\n  return c;\n};\nconst renderSticker = (sticker, canvasSize) => {\n  initApplication(canvasSize);\n\n  const gl = components.gl;\n  const c = components.canvas;\n\n  const texture = createTexture(gl, { img: sticker.image });\n\n  const d = new Vec2(sticker.image.width, sticker.image.height);\n  const size = new Mat3(d.width, 0, 0, 0, d.height, 0, 0, 0, 1);\n  // const position = sticker.position.subtractNew(new Vec2(0.5)).scale(c.width);\n  const position = sticker.position.clone();\n  position.y = 1 - position.y;\n  position.scale(c.width).subtract(dims.scaleNew(0.5));\n  const scale = (sticker.scale * c.width) / Math.min(d.x, d.y) / 0.5;\n  let a = sticker.rotation;\n  let rotation = new Mat3(\n    Math.cos(a),\n    Math.sin(a),\n    0,\n    -Math.sin(a),\n    Math.cos(a),\n    0,\n    0,\n    0,\n    1\n  );\n  // rotation = rotationPoint.multiplyNew(rotation).multiply(rotationPoint.invertNew())\n  const transform = new Mat3(\n    scale,\n    0,\n    position.x,\n    0,\n    scale,\n    position.y,\n    0,\n    0,\n    1\n  );\n  const sizeTransformationMatrix = size\n    .multiply(rotation)\n    .multiplyNew(transform);\n  // const sizeTransformationMatrix = rotation;\n\n  console.log(sizeTransformationMatrix.array);\n\n  renderProgram(gl, 0, texture, {\n    u_transform: sizeTransformationMatrix.array,\n  });\n\n  return components.canvas;\n};\n\nconst initProgram = (gl) => {\n  const position = new Float32Array([\n    -0.5, -0.5, 0.5, -0.5, 0.5, 0.5,\n\n    0.5, 0.5, -0.5, 0.5, -0.5, -0.5,\n  ]);\n  const uvs = new Float32Array([0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0]);\n\n  components.renderer = createRenderer(gl, {\n    vert,\n    frag,\n    attributes: {\n      position: { data: position, size: 2 },\n      uv: { data: uvs, size: 2 },\n    },\n    count: 6,\n  });\n};\n\nconst renderProgram = (gl, delta, texture, uniforms) => {\n  // render to the canvas (setting null for target)\n  // gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  gl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);\n\n  // Bind the read texture - this sis what was rendered last frame\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  // bind the output texture uniform\n  components.renderer.bindUniform(\"s_main\", 0);\n  components.renderer.bindUniform(\"u_time\", delta * 0.001);\n  components.renderer.bindUniform(\"u_resolution\", [\n    gl.canvas.width,\n    gl.canvas.height,\n  ]);\n  for (let n in uniforms) components.renderer.bindUniform(n, uniforms[n]);\n\n  // Render the output\n  components.renderer.render({\n    width: gl.canvas.width,\n    height: gl.canvas.height,\n  });\n};\n\nexport { renderSticker };\n"},"lineCount":null}},"error":null,"hash":"d10be125ec1a04ab69eeed180d279d71","cacheData":{"env":{}}}