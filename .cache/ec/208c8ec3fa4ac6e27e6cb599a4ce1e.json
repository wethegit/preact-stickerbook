{"id":"DAOJ","dependencies":[{"name":"/home/liamegan/projects/wtc/preact-stickerbook/package.json","includedInParent":true,"mtime":1679503664025},{"name":"preact","loc":{"line":1,"column":33,"index":33},"parent":"/home/liamegan/projects/wtc/preact-stickerbook/src/stickerbook.js","resolved":"/home/liamegan/projects/wtc/preact-stickerbook/node_modules/preact/dist/preact.module.js"},{"name":"preact/hooks","loc":{"line":8,"column":7,"index":124},"parent":"/home/liamegan/projects/wtc/preact-stickerbook/src/stickerbook.js","resolved":"/home/liamegan/projects/wtc/preact-stickerbook/node_modules/preact/hooks/dist/hooks.module.js"},{"name":"wtc-math","loc":{"line":9,"column":21,"index":161},"parent":"/home/liamegan/projects/wtc/preact-stickerbook/src/stickerbook.js","resolved":"/home/liamegan/projects/wtc/preact-stickerbook/node_modules/wtc-math/dist/index.module.js"},{"name":"./helpers","loc":{"line":11,"column":27,"index":201},"parent":"/home/liamegan/projects/wtc/preact-stickerbook/src/stickerbook.js","resolved":"/home/liamegan/projects/wtc/preact-stickerbook/src/helpers.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.StickerbookContext=void 0,exports.default=a;var e=require(\"preact\"),t=require(\"preact/hooks\"),r=require(\"wtc-math\"),i=require(\"./helpers\");function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}const n=(0,e.createContext)();function a(a){let{background:s={},foreground:c={},frame:u={},outputHeight:d=500,outputWidth:l=500,children:h,className:g,...f}=a;const[m,p]=(0,t.useState)({width:l,height:d,percentageShift:1,rendered:!1}),[w,k]=(0,t.useState)(),[b,v]=(0,t.useState)({}),S=(0,t.useRef)(),x=(0,t.useRef)(),y=(0,t.useMemo)(()=>h?h.flat().length+2:2,[h]),_=(0,t.useMemo)(()=>{if(\"scene\"===s.type)return{};return{backgroundRepeat:\"repeat\",backgroundSize:`${b.width*m.width/l}px auto`}},[b.width,m.width,s.type,l]);return(0,t.useLayoutEffect)(()=>{const e=S.current,t=x.current;let i,o;const n=function(){const t=e.getBoundingClientRect();return new r.Vec2(t.left,t.top)},a=function(r){e&&(clearTimeout(i),i=setTimeout(()=>{const i=t.offsetWidth,o=e.offsetWidth;k(n()),i===o&&!0!==r||p(t=>({width:i,height:e.offsetHeight/o*i,percentageShift:i/t.width,rendered:!0}))},300))},s=function(){e&&(clearTimeout(o),o=setInterval(()=>{k(n())},300))};return window.addEventListener(\"resize\",a),window.addEventListener(\"scroll\",s),a(!0),()=>{clearTimeout(i),clearTimeout(o),window.removeEventListener(\"resize\",a),window.removeEventListener(\"scroll\",s)}},[]),(0,t.useEffect)(()=>{if(!s.image)return;const e=new Image;e.onload=(e=>{const t=e.target,r=t.width,i=t.height;v({width:r,height:i})}),e.src=s.image},[s.image]),(0,e.h)(\"div\",o({role:\"region\",\"aria-label\":\"Stickerbook\",className:(0,i.classnames)([\"Stickerbook\",g]),ref:x},f),(0,e.h)(\"div\",{ref:S,style:{width:`${m.width}px`,height:`${m.height}px`}},s&&s.image&&(0,e.h)(\"div\",{role:\"img\",className:\"Stickerbook__background\",style:{backgroundImage:`url(${s.image})`,..._},\"aria-label\":s.alt||\"\"}),u&&u.image&&(0,e.h)(\"img\",{src:u.image,alt:u.alt||\"\",className:\"Stickerbook__frame\"}),(0,e.h)(n.Provider,{value:{parentRef:x.current,mainRef:S.current,position:w,dimensions:m}},m.rendered&&h),c&&c.image&&(0,e.h)(\"img\",{src:c.image,alt:c.alt||\"\",className:\"Stickerbook__foreground\",style:{zIndex:y}})))}exports.StickerbookContext=n;"},"sourceMaps":{"js":{"mappings":[{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":0}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":13}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":20}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":35}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":43}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":56}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":57}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":64}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":68}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":76}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":100}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":102}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":110}},{"source":"stickerbook.js","original":{"line":191,"column":0},"generated":{"line":1,"column":118}},{"source":"stickerbook.js","original":{"line":1,"column":0},"generated":{"line":1,"column":120}},{"source":"stickerbook.js","name":"_preact","original":{"line":1,"column":0},"generated":{"line":1,"column":124}},{"source":"stickerbook.js","name":"require","original":{"line":1,"column":0},"generated":{"line":1,"column":126}},{"source":"stickerbook.js","original":{"line":1,"column":0},"generated":{"line":1,"column":134}},{"source":"stickerbook.js","name":"_hooks","original":{"line":2,"column":0},"generated":{"line":1,"column":144}},{"source":"stickerbook.js","name":"require","original":{"line":2,"column":0},"generated":{"line":1,"column":146}},{"source":"stickerbook.js","original":{"line":2,"column":0},"generated":{"line":1,"column":154}},{"source":"stickerbook.js","name":"_wtcMath","original":{"line":9,"column":0},"generated":{"line":1,"column":170}},{"source":"stickerbook.js","name":"require","original":{"line":9,"column":0},"generated":{"line":1,"column":172}},{"source":"stickerbook.js","original":{"line":9,"column":0},"generated":{"line":1,"column":180}},{"source":"stickerbook.js","name":"_helpers","original":{"line":11,"column":0},"generated":{"line":1,"column":192}},{"source":"stickerbook.js","name":"require","original":{"line":11,"column":0},"generated":{"line":1,"column":194}},{"source":"stickerbook.js","original":{"line":11,"column":0},"generated":{"line":1,"column":202}},{"source":"stickerbook.js","original":{"line":11,"column":39},"generated":{"line":1,"column":215}},{"source":"stickerbook.js","name":"_extends","original":{"line":11,"column":39},"generated":{"line":1,"column":224}},{"source":"stickerbook.js","name":"_extends","original":{"line":11,"column":39},"generated":{"line":1,"column":228}},{"source":"stickerbook.js","name":"_extends","original":{"line":11,"column":39},"generated":{"line":1,"column":235}},{"source":"stickerbook.js","name":"Object","original":{"line":11,"column":39},"generated":{"line":1,"column":237}},{"source":"stickerbook.js","name":"assign","original":{"line":11,"column":39},"generated":{"line":1,"column":244}},{"source":"stickerbook.js","name":"Object","original":{"line":11,"column":39},"generated":{"line":1,"column":251}},{"source":"stickerbook.js","name":"assign","original":{"line":11,"column":39},"generated":{"line":1,"column":258}},{"source":"stickerbook.js","name":"bind","original":{"line":11,"column":39},"generated":{"line":1,"column":265}},{"source":"stickerbook.js","name":"target","original":{"line":11,"column":39},"generated":{"line":1,"column":272}},{"source":"stickerbook.js","name":"target","original":{"line":11,"column":39},"generated":{"line":1,"column":281}},{"source":"stickerbook.js","name":"i","original":{"line":11,"column":39},"generated":{"line":1,"column":284}},{"source":"stickerbook.js","name":"i","original":{"line":11,"column":39},"generated":{"line":1,"column":288}},{"source":"stickerbook.js","name":"i","original":{"line":11,"column":39},"generated":{"line":1,"column":292}},{"source":"stickerbook.js","name":"i","original":{"line":11,"column":39},"generated":{"line":1,"column":294}},{"source":"stickerbook.js","name":"i","original":{"line":11,"column":39},"generated":{"line":1,"column":296}},{"source":"stickerbook.js","name":"arguments","original":{"line":11,"column":39},"generated":{"line":1,"column":298}},{"source":"stickerbook.js","name":"length","original":{"line":11,"column":39},"generated":{"line":1,"column":308}},{"source":"stickerbook.js","name":"i","original":{"line":11,"column":39},"generated":{"line":1,"column":315}},{"source":"stickerbook.js","name":"source","original":{"line":11,"column":39},"generated":{"line":1,"column":319}},{"source":"stickerbook.js","name":"source","original":{"line":11,"column":39},"generated":{"line":1,"column":320}},{"source":"stickerbook.js","name":"source","original":{"line":11,"column":39},"generated":{"line":1,"column":324}},{"source":"stickerbook.js","name":"arguments","original":{"line":11,"column":39},"generated":{"line":1,"column":326}},{"source":"stickerbook.js","name":"i","original":{"line":11,"column":39},"generated":{"line":1,"column":336}},{"source":"stickerbook.js","name":"key","original":{"line":11,"column":39},"generated":{"line":1,"column":339}},{"source":"stickerbook.js","name":"key","original":{"line":11,"column":39},"generated":{"line":1,"column":343}},{"source":"stickerbook.js","name":"key","original":{"line":11,"column":39},"generated":{"line":1,"column":347}},{"source":"stickerbook.js","name":"source","original":{"line":11,"column":39},"generated":{"line":1,"column":352}},{"source":"stickerbook.js","name":"Object","original":{"line":11,"column":39},"generated":{"line":1,"column":354}},{"source":"stickerbook.js","name":"prototype","original":{"line":11,"column":39},"generated":{"line":1,"column":361}},{"source":"stickerbook.js","name":"hasOwnProperty","original":{"line":11,"column":39},"generated":{"line":1,"column":371}},{"source":"stickerbook.js","name":"call","original":{"line":11,"column":39},"generated":{"line":1,"column":386}},{"source":"stickerbook.js","name":"source","original":{"line":11,"column":39},"generated":{"line":1,"column":391}},{"source":"stickerbook.js","name":"key","original":{"line":11,"column":39},"generated":{"line":1,"column":393}},{"source":"stickerbook.js","name":"target","original":{"line":11,"column":39},"generated":{"line":1,"column":398}},{"source":"stickerbook.js","name":"key","original":{"line":11,"column":39},"generated":{"line":1,"column":400}},{"source":"stickerbook.js","name":"source","original":{"line":11,"column":39},"generated":{"line":1,"column":403}},{"source":"stickerbook.js","name":"key","original":{"line":11,"column":39},"generated":{"line":1,"column":405}},{"source":"stickerbook.js","name":"target","original":{"line":11,"column":39},"generated":{"line":1,"column":409}},{"source":"stickerbook.js","name":"target","original":{"line":11,"column":39},"generated":{"line":1,"column":416}},{"source":"stickerbook.js","name":"apply","original":{"line":11,"column":39},"generated":{"line":1,"column":420}},{"source":"stickerbook.js","name":"arguments","original":{"line":11,"column":39},"generated":{"line":1,"column":426}},{"source":"stickerbook.js","name":"arguments","original":{"line":11,"column":39},"generated":{"line":1,"column":431}},{"source":"stickerbook.js","original":{"line":16,"column":7},"generated":{"line":1,"column":442}},{"source":"stickerbook.js","name":"StickerbookContext","original":{"line":16,"column":13},"generated":{"line":1,"column":448}},{"source":"stickerbook.js","original":{"line":16,"column":34},"generated":{"line":1,"column":451}},{"source":"stickerbook.js","name":"createContext","original":{"line":16,"column":34},"generated":{"line":1,"column":453}},{"source":"stickerbook.js","original":{"line":16,"column":47},"generated":{"line":1,"column":455}},{"source":"stickerbook.js","original":{"line":18,"column":15},"generated":{"line":1,"column":472}},{"source":"stickerbook.js","name":"Stickerbook","original":{"line":18,"column":24},"generated":{"line":1,"column":481}},{"source":"stickerbook.js","name":"_ref","original":{"line":18,"column":35},"generated":{"line":1,"column":483}},{"source":"stickerbook.js","original":{"line":27,"column":3},"generated":{"line":1,"column":486}},{"source":"stickerbook.js","original":{"line":18,"column":36},"generated":{"line":1,"column":490}},{"source":"stickerbook.js","name":"background","original":{"line":19,"column":2},"generated":{"line":1,"column":501}},{"source":"stickerbook.js","original":{"line":19,"column":15},"generated":{"line":1,"column":503}},{"source":"stickerbook.js","original":{"line":19,"column":17},"generated":{"line":1,"column":506}},{"source":"stickerbook.js","name":"foreground","original":{"line":20,"column":2},"generated":{"line":1,"column":517}},{"source":"stickerbook.js","original":{"line":20,"column":15},"generated":{"line":1,"column":519}},{"source":"stickerbook.js","original":{"line":20,"column":17},"generated":{"line":1,"column":522}},{"source":"stickerbook.js","name":"frame","original":{"line":21,"column":2},"generated":{"line":1,"column":528}},{"source":"stickerbook.js","original":{"line":21,"column":10},"generated":{"line":1,"column":530}},{"source":"stickerbook.js","original":{"line":21,"column":12},"generated":{"line":1,"column":533}},{"source":"stickerbook.js","name":"outputHeight","original":{"line":22,"column":2},"generated":{"line":1,"column":546}},{"source":"stickerbook.js","original":{"line":22,"column":17},"generated":{"line":1,"column":548}},{"source":"stickerbook.js","original":{"line":22,"column":20},"generated":{"line":1,"column":552}},{"source":"stickerbook.js","name":"outputWidth","original":{"line":23,"column":2},"generated":{"line":1,"column":564}},{"source":"stickerbook.js","original":{"line":23,"column":16},"generated":{"line":1,"column":566}},{"source":"stickerbook.js","original":{"line":23,"column":19},"generated":{"line":1,"column":570}},{"source":"stickerbook.js","name":"children","original":{"line":24,"column":2},"generated":{"line":1,"column":579}},{"source":"stickerbook.js","original":{"line":24,"column":10},"generated":{"line":1,"column":581}},{"source":"stickerbook.js","name":"className","original":{"line":25,"column":2},"generated":{"line":1,"column":591}},{"source":"stickerbook.js","name":"props","original":{"line":26,"column":5},"generated":{"line":1,"column":596}},{"source":"stickerbook.js","name":"_ref","original":{"line":27,"column":1},"generated":{"line":1,"column":599}},{"source":"stickerbook.js","original":{"line":28,"column":2},"generated":{"line":1,"column":601}},{"source":"stickerbook.js","name":"dimensions","original":{"line":28,"column":9},"generated":{"line":1,"column":607}},{"source":"stickerbook.js","name":"setDimensions","original":{"line":28,"column":21},"generated":{"line":1,"column":609}},{"source":"stickerbook.js","original":{"line":28,"column":38},"generated":{"line":1,"column":613}},{"source":"stickerbook.js","name":"useState","original":{"line":28,"column":38},"generated":{"line":1,"column":615}},{"source":"stickerbook.js","original":{"line":28,"column":46},"generated":{"line":1,"column":617}},{"source":"stickerbook.js","original":{"line":28,"column":47},"generated":{"line":1,"column":627}},{"source":"stickerbook.js","name":"width","original":{"line":29,"column":4},"generated":{"line":1,"column":628}},{"source":"stickerbook.js","name":"outputWidth","original":{"line":29,"column":11},"generated":{"line":1,"column":634}},{"source":"stickerbook.js","name":"height","original":{"line":30,"column":4},"generated":{"line":1,"column":636}},{"source":"stickerbook.js","name":"outputHeight","original":{"line":30,"column":12},"generated":{"line":1,"column":643}},{"source":"stickerbook.js","name":"percentageShift","original":{"line":31,"column":4},"generated":{"line":1,"column":645}},{"source":"stickerbook.js","original":{"line":31,"column":21},"generated":{"line":1,"column":661}},{"source":"stickerbook.js","name":"rendered","original":{"line":32,"column":4},"generated":{"line":1,"column":663}},{"source":"stickerbook.js","original":{"line":32,"column":14},"generated":{"line":1,"column":673}},{"source":"stickerbook.js","name":"position","original":{"line":34,"column":9},"generated":{"line":1,"column":678}},{"source":"stickerbook.js","name":"setPosition","original":{"line":34,"column":19},"generated":{"line":1,"column":680}},{"source":"stickerbook.js","original":{"line":34,"column":34},"generated":{"line":1,"column":684}},{"source":"stickerbook.js","name":"useState","original":{"line":34,"column":34},"generated":{"line":1,"column":686}},{"source":"stickerbook.js","original":{"line":34,"column":42},"generated":{"line":1,"column":688}},{"source":"stickerbook.js","name":"backgroundDetails","original":{"line":35,"column":9},"generated":{"line":1,"column":701}},{"source":"stickerbook.js","name":"setBackgroundDetails","original":{"line":35,"column":28},"generated":{"line":1,"column":703}},{"source":"stickerbook.js","original":{"line":35,"column":52},"generated":{"line":1,"column":707}},{"source":"stickerbook.js","name":"useState","original":{"line":35,"column":52},"generated":{"line":1,"column":709}},{"source":"stickerbook.js","original":{"line":35,"column":60},"generated":{"line":1,"column":711}},{"source":"stickerbook.js","original":{"line":35,"column":61},"generated":{"line":1,"column":721}},{"source":"stickerbook.js","name":"mainRef","original":{"line":36,"column":8},"generated":{"line":1,"column":725}},{"source":"stickerbook.js","original":{"line":36,"column":18},"generated":{"line":1,"column":728}},{"source":"stickerbook.js","name":"useRef","original":{"line":36,"column":18},"generated":{"line":1,"column":730}},{"source":"stickerbook.js","original":{"line":36,"column":24},"generated":{"line":1,"column":732}},{"source":"stickerbook.js","name":"parentRef","original":{"line":37,"column":8},"generated":{"line":1,"column":742}},{"source":"stickerbook.js","original":{"line":37,"column":20},"generated":{"line":1,"column":745}},{"source":"stickerbook.js","name":"useRef","original":{"line":37,"column":20},"generated":{"line":1,"column":747}},{"source":"stickerbook.js","original":{"line":37,"column":26},"generated":{"line":1,"column":749}},{"source":"stickerbook.js","name":"foregroundIndex","original":{"line":38,"column":8},"generated":{"line":1,"column":759}},{"source":"stickerbook.js","original":{"line":38,"column":26},"generated":{"line":1,"column":762}},{"source":"stickerbook.js","name":"useMemo","original":{"line":38,"column":26},"generated":{"line":1,"column":764}},{"source":"stickerbook.js","original":{"line":38,"column":33},"generated":{"line":1,"column":766}},{"source":"stickerbook.js","original":{"line":39,"column":4},"generated":{"line":1,"column":775}},{"source":"stickerbook.js","name":"children","original":{"line":39,"column":11},"generated":{"line":1,"column":779}},{"source":"stickerbook.js","name":"children","original":{"line":39,"column":22},"generated":{"line":1,"column":781}},{"source":"stickerbook.js","name":"flat","original":{"line":39,"column":31},"generated":{"line":1,"column":783}},{"source":"stickerbook.js","name":"length","original":{"line":39,"column":38},"generated":{"line":1,"column":790}},{"source":"stickerbook.js","original":{"line":39,"column":47},"generated":{"line":1,"column":797}},{"source":"stickerbook.js","original":{"line":39,"column":51},"generated":{"line":1,"column":799}},{"source":"stickerbook.js","original":{"line":40,"column":4},"generated":{"line":1,"column":801}},{"source":"stickerbook.js","name":"children","original":{"line":40,"column":5},"generated":{"line":1,"column":802}},{"source":"stickerbook.js","name":"backgroundStyles","original":{"line":43,"column":8},"generated":{"line":1,"column":806}},{"source":"stickerbook.js","original":{"line":43,"column":27},"generated":{"line":1,"column":809}},{"source":"stickerbook.js","name":"useMemo","original":{"line":43,"column":27},"generated":{"line":1,"column":811}},{"source":"stickerbook.js","original":{"line":43,"column":34},"generated":{"line":1,"column":813}},{"source":"stickerbook.js","original":{"line":43,"column":35},"generated":{"line":1,"column":822}},{"source":"stickerbook.js","original":{"line":44,"column":4},"generated":{"line":1,"column":827}},{"source":"stickerbook.js","original":{"line":44,"column":28},"generated":{"line":1,"column":830}},{"source":"stickerbook.js","name":"background","original":{"line":44,"column":8},"generated":{"line":1,"column":840}},{"source":"stickerbook.js","name":"type","original":{"line":44,"column":19},"generated":{"line":1,"column":842}},{"source":"stickerbook.js","original":{"line":44,"column":37},"generated":{"line":1,"column":847}},{"source":"stickerbook.js","original":{"line":44,"column":44},"generated":{"line":1,"column":853}},{"source":"stickerbook.js","original":{"line":51,"column":4},"generated":{"line":1,"column":856}},{"source":"stickerbook.js","original":{"line":51,"column":11},"generated":{"line":1,"column":862}},{"source":"stickerbook.js","name":"backgroundRepeat","original":{"line":52,"column":6},"generated":{"line":1,"column":863}},{"source":"stickerbook.js","original":{"line":52,"column":24},"generated":{"line":1,"column":880}},{"source":"stickerbook.js","name":"backgroundSize","original":{"line":53,"column":6},"generated":{"line":1,"column":889}},{"source":"stickerbook.js","name":"backgroundDetails","original":{"line":49,"column":20},"generated":{"line":1,"column":907}},{"source":"stickerbook.js","name":"width","original":{"line":49,"column":38},"generated":{"line":1,"column":909}},{"source":"stickerbook.js","name":"dimensions","original":{"line":49,"column":46},"generated":{"line":1,"column":915}},{"source":"stickerbook.js","name":"width","original":{"line":49,"column":57},"generated":{"line":1,"column":917}},{"source":"stickerbook.js","name":"outputWidth","original":{"line":49,"column":66},"generated":{"line":1,"column":923}},{"source":"stickerbook.js","original":{"line":55,"column":5},"generated":{"line":1,"column":936}},{"source":"stickerbook.js","name":"backgroundDetails","original":{"line":55,"column":6},"generated":{"line":1,"column":937}},{"source":"stickerbook.js","name":"width","original":{"line":55,"column":24},"generated":{"line":1,"column":939}},{"source":"stickerbook.js","name":"dimensions","original":{"line":55,"column":31},"generated":{"line":1,"column":945}},{"source":"stickerbook.js","name":"width","original":{"line":55,"column":42},"generated":{"line":1,"column":947}},{"source":"stickerbook.js","name":"background","original":{"line":55,"column":49},"generated":{"line":1,"column":953}},{"source":"stickerbook.js","name":"type","original":{"line":55,"column":60},"generated":{"line":1,"column":955}},{"source":"stickerbook.js","name":"outputWidth","original":{"line":55,"column":66},"generated":{"line":1,"column":960}},{"source":"stickerbook.js","original":{"line":132,"column":2},"generated":{"line":1,"column":964}},{"source":"stickerbook.js","original":{"line":58,"column":2},"generated":{"line":1,"column":971}},{"source":"stickerbook.js","name":"useLayoutEffect","original":{"line":58,"column":2},"generated":{"line":1,"column":973}},{"source":"stickerbook.js","original":{"line":58,"column":17},"generated":{"line":1,"column":975}},{"source":"stickerbook.js","original":{"line":58,"column":18},"generated":{"line":1,"column":992}},{"source":"stickerbook.js","original":{"line":59,"column":4},"generated":{"line":1,"column":997}},{"source":"stickerbook.js","name":"element","original":{"line":59,"column":10},"generated":{"line":1,"column":1003}},{"source":"stickerbook.js","name":"mainRef","original":{"line":59,"column":20},"generated":{"line":1,"column":1005}},{"source":"stickerbook.js","name":"current","original":{"line":59,"column":28},"generated":{"line":1,"column":1007}},{"source":"stickerbook.js","name":"parent","original":{"line":60,"column":10},"generated":{"line":1,"column":1015}},{"source":"stickerbook.js","name":"parentRef","original":{"line":60,"column":19},"generated":{"line":1,"column":1017}},{"source":"stickerbook.js","name":"current","original":{"line":60,"column":29},"generated":{"line":1,"column":1019}},{"source":"stickerbook.js","original":{"line":61,"column":4},"generated":{"line":1,"column":1027}},{"source":"stickerbook.js","name":"resizeTimer","original":{"line":61,"column":8},"generated":{"line":1,"column":1031}},{"source":"stickerbook.js","name":"scrollTimer","original":{"line":61,"column":21},"generated":{"line":1,"column":1033}},{"source":"stickerbook.js","original":{"line":63,"column":4},"generated":{"line":1,"column":1035}},{"source":"stickerbook.js","name":"getPosition","original":{"line":63,"column":10},"generated":{"line":1,"column":1041}},{"source":"stickerbook.js","original":{"line":63,"column":24},"generated":{"line":1,"column":1043}},{"source":"stickerbook.js","original":{"line":64,"column":6},"generated":{"line":1,"column":1054}},{"source":"stickerbook.js","name":"rect","original":{"line":64,"column":12},"generated":{"line":1,"column":1060}},{"source":"stickerbook.js","name":"element","original":{"line":64,"column":19},"generated":{"line":1,"column":1062}},{"source":"stickerbook.js","name":"getBoundingClientRect","original":{"line":64,"column":27},"generated":{"line":1,"column":1064}},{"source":"stickerbook.js","original":{"line":66,"column":6},"generated":{"line":1,"column":1088}},{"source":"stickerbook.js","original":{"line":66,"column":13},"generated":{"line":1,"column":1095}},{"source":"stickerbook.js","name":"Vec2","original":{"line":66,"column":17},"generated":{"line":1,"column":1099}},{"source":"stickerbook.js","original":{"line":66,"column":21},"generated":{"line":1,"column":1101}},{"source":"stickerbook.js","name":"rect","original":{"line":66,"column":22},"generated":{"line":1,"column":1106}},{"source":"stickerbook.js","name":"left","original":{"line":66,"column":27},"generated":{"line":1,"column":1108}},{"source":"stickerbook.js","name":"rect","original":{"line":66,"column":33},"generated":{"line":1,"column":1113}},{"source":"stickerbook.js","name":"top","original":{"line":66,"column":38},"generated":{"line":1,"column":1115}},{"source":"stickerbook.js","name":"onResize","original":{"line":69,"column":10},"generated":{"line":1,"column":1121}},{"source":"stickerbook.js","original":{"line":69,"column":21},"generated":{"line":1,"column":1123}},{"source":"stickerbook.js","name":"init","original":{"line":69,"column":31},"generated":{"line":1,"column":1132}},{"source":"stickerbook.js","name":"element","original":{"line":70,"column":11},"generated":{"line":1,"column":1135}},{"source":"stickerbook.js","name":"clearTimeout","original":{"line":71,"column":6},"generated":{"line":1,"column":1139}},{"source":"stickerbook.js","name":"resizeTimer","original":{"line":71,"column":19},"generated":{"line":1,"column":1152}},{"source":"stickerbook.js","name":"resizeTimer","original":{"line":73,"column":6},"generated":{"line":1,"column":1155}},{"source":"stickerbook.js","name":"setTimeout","original":{"line":73,"column":20},"generated":{"line":1,"column":1157}},{"source":"stickerbook.js","original":{"line":73,"column":31},"generated":{"line":1,"column":1168}},{"source":"stickerbook.js","original":{"line":74,"column":8},"generated":{"line":1,"column":1173}},{"source":"stickerbook.js","name":"newWidth","original":{"line":74,"column":14},"generated":{"line":1,"column":1179}},{"source":"stickerbook.js","name":"parent","original":{"line":74,"column":25},"generated":{"line":1,"column":1181}},{"source":"stickerbook.js","name":"offsetWidth","original":{"line":74,"column":32},"generated":{"line":1,"column":1183}},{"source":"stickerbook.js","name":"curWidth","original":{"line":75,"column":14},"generated":{"line":1,"column":1195}},{"source":"stickerbook.js","name":"element","original":{"line":75,"column":25},"generated":{"line":1,"column":1197}},{"source":"stickerbook.js","name":"offsetWidth","original":{"line":75,"column":33},"generated":{"line":1,"column":1199}},{"source":"stickerbook.js","name":"setPosition","original":{"line":77,"column":8},"generated":{"line":1,"column":1211}},{"source":"stickerbook.js","name":"getPosition","original":{"line":77,"column":20},"generated":{"line":1,"column":1213}},{"source":"stickerbook.js","name":"newWidth","original":{"line":79,"column":12},"generated":{"line":1,"column":1218}},{"source":"stickerbook.js","name":"curWidth","original":{"line":79,"column":25},"generated":{"line":1,"column":1222}},{"source":"stickerbook.js","original":{"line":79,"column":46},"generated":{"line":1,"column":1226}},{"source":"stickerbook.js","name":"init","original":{"line":79,"column":37},"generated":{"line":1,"column":1230}},{"source":"stickerbook.js","name":"setDimensions","original":{"line":80,"column":10},"generated":{"line":1,"column":1233}},{"source":"stickerbook.js","name":"cur","original":{"line":80,"column":25},"generated":{"line":1,"column":1235}},{"source":"stickerbook.js","original":{"line":81,"column":19},"generated":{"line":1,"column":1239}},{"source":"stickerbook.js","name":"width","original":{"line":82,"column":14},"generated":{"line":1,"column":1240}},{"source":"stickerbook.js","name":"newWidth","original":{"line":82,"column":21},"generated":{"line":1,"column":1246}},{"source":"stickerbook.js","name":"height","original":{"line":83,"column":14},"generated":{"line":1,"column":1248}},{"source":"stickerbook.js","name":"element","original":{"line":83,"column":23},"generated":{"line":1,"column":1255}},{"source":"stickerbook.js","name":"offsetHeight","original":{"line":83,"column":31},"generated":{"line":1,"column":1257}},{"source":"stickerbook.js","name":"curWidth","original":{"line":83,"column":46},"generated":{"line":1,"column":1270}},{"source":"stickerbook.js","name":"newWidth","original":{"line":83,"column":58},"generated":{"line":1,"column":1272}},{"source":"stickerbook.js","name":"percentageShift","original":{"line":84,"column":14},"generated":{"line":1,"column":1274}},{"source":"stickerbook.js","name":"newWidth","original":{"line":84,"column":31},"generated":{"line":1,"column":1290}},{"source":"stickerbook.js","name":"cur","original":{"line":84,"column":42},"generated":{"line":1,"column":1292}},{"source":"stickerbook.js","name":"width","original":{"line":84,"column":46},"generated":{"line":1,"column":1294}},{"source":"stickerbook.js","name":"rendered","original":{"line":85,"column":14},"generated":{"line":1,"column":1300}},{"source":"stickerbook.js","original":{"line":85,"column":24},"generated":{"line":1,"column":1310}},{"source":"stickerbook.js","original":{"line":88,"column":9},"generated":{"line":1,"column":1316}},{"source":"stickerbook.js","name":"onScroll","original":{"line":91,"column":10},"generated":{"line":1,"column":1323}},{"source":"stickerbook.js","original":{"line":91,"column":21},"generated":{"line":1,"column":1325}},{"source":"stickerbook.js","name":"element","original":{"line":92,"column":11},"generated":{"line":1,"column":1336}},{"source":"stickerbook.js","name":"clearTimeout","original":{"line":93,"column":6},"generated":{"line":1,"column":1340}},{"source":"stickerbook.js","name":"scrollTimer","original":{"line":93,"column":19},"generated":{"line":1,"column":1353}},{"source":"stickerbook.js","name":"scrollTimer","original":{"line":95,"column":6},"generated":{"line":1,"column":1356}},{"source":"stickerbook.js","name":"setInterval","original":{"line":95,"column":20},"generated":{"line":1,"column":1358}},{"source":"stickerbook.js","original":{"line":95,"column":32},"generated":{"line":1,"column":1370}},{"source":"stickerbook.js","name":"setPosition","original":{"line":96,"column":8},"generated":{"line":1,"column":1375}},{"source":"stickerbook.js","name":"getPosition","original":{"line":96,"column":20},"generated":{"line":1,"column":1377}},{"source":"stickerbook.js","original":{"line":97,"column":9},"generated":{"line":1,"column":1383}},{"source":"stickerbook.js","original":{"line":105,"column":4},"generated":{"line":1,"column":1390}},{"source":"stickerbook.js","name":"window","original":{"line":100,"column":4},"generated":{"line":1,"column":1397}},{"source":"stickerbook.js","name":"addEventListener","original":{"line":100,"column":11},"generated":{"line":1,"column":1404}},{"source":"stickerbook.js","original":{"line":100,"column":28},"generated":{"line":1,"column":1421}},{"source":"stickerbook.js","name":"onResize","original":{"line":100,"column":38},"generated":{"line":1,"column":1430}},{"source":"stickerbook.js","name":"window","original":{"line":101,"column":4},"generated":{"line":1,"column":1433}},{"source":"stickerbook.js","name":"addEventListener","original":{"line":101,"column":11},"generated":{"line":1,"column":1440}},{"source":"stickerbook.js","original":{"line":101,"column":28},"generated":{"line":1,"column":1457}},{"source":"stickerbook.js","name":"onScroll","original":{"line":101,"column":38},"generated":{"line":1,"column":1466}},{"source":"stickerbook.js","name":"onResize","original":{"line":103,"column":4},"generated":{"line":1,"column":1469}},{"source":"stickerbook.js","original":{"line":103,"column":13},"generated":{"line":1,"column":1472}},{"source":"stickerbook.js","original":{"line":105,"column":11},"generated":{"line":1,"column":1475}},{"source":"stickerbook.js","name":"clearTimeout","original":{"line":106,"column":6},"generated":{"line":1,"column":1480}},{"source":"stickerbook.js","name":"resizeTimer","original":{"line":106,"column":19},"generated":{"line":1,"column":1493}},{"source":"stickerbook.js","name":"clearTimeout","original":{"line":107,"column":6},"generated":{"line":1,"column":1496}},{"source":"stickerbook.js","name":"scrollTimer","original":{"line":107,"column":19},"generated":{"line":1,"column":1509}},{"source":"stickerbook.js","name":"window","original":{"line":109,"column":6},"generated":{"line":1,"column":1512}},{"source":"stickerbook.js","name":"removeEventListener","original":{"line":109,"column":13},"generated":{"line":1,"column":1519}},{"source":"stickerbook.js","original":{"line":109,"column":33},"generated":{"line":1,"column":1539}},{"source":"stickerbook.js","name":"onResize","original":{"line":109,"column":43},"generated":{"line":1,"column":1548}},{"source":"stickerbook.js","name":"window","original":{"line":110,"column":6},"generated":{"line":1,"column":1551}},{"source":"stickerbook.js","name":"removeEventListener","original":{"line":110,"column":13},"generated":{"line":1,"column":1558}},{"source":"stickerbook.js","original":{"line":110,"column":33},"generated":{"line":1,"column":1578}},{"source":"stickerbook.js","name":"onScroll","original":{"line":110,"column":43},"generated":{"line":1,"column":1587}},{"source":"stickerbook.js","original":{"line":112,"column":5},"generated":{"line":1,"column":1592}},{"source":"stickerbook.js","original":{"line":116,"column":2},"generated":{"line":1,"column":1597}},{"source":"stickerbook.js","name":"useEffect","original":{"line":116,"column":2},"generated":{"line":1,"column":1599}},{"source":"stickerbook.js","original":{"line":116,"column":11},"generated":{"line":1,"column":1601}},{"source":"stickerbook.js","original":{"line":116,"column":12},"generated":{"line":1,"column":1612}},{"source":"stickerbook.js","original":{"line":117,"column":4},"generated":{"line":1,"column":1617}},{"source":"stickerbook.js","name":"background","original":{"line":117,"column":9},"generated":{"line":1,"column":1621}},{"source":"stickerbook.js","name":"image","original":{"line":117,"column":20},"generated":{"line":1,"column":1623}},{"source":"stickerbook.js","original":{"line":117,"column":27},"generated":{"line":1,"column":1629}},{"source":"stickerbook.js","original":{"line":119,"column":4},"generated":{"line":1,"column":1636}},{"source":"stickerbook.js","name":"img","original":{"line":119,"column":10},"generated":{"line":1,"column":1642}},{"source":"stickerbook.js","original":{"line":119,"column":16},"generated":{"line":1,"column":1644}},{"source":"stickerbook.js","name":"Image","original":{"line":119,"column":20},"generated":{"line":1,"column":1648}},{"source":"stickerbook.js","name":"img","original":{"line":121,"column":4},"generated":{"line":1,"column":1654}},{"source":"stickerbook.js","name":"onload","original":{"line":121,"column":8},"generated":{"line":1,"column":1656}},{"source":"stickerbook.js","name":"e","original":{"line":121,"column":18},"generated":{"line":1,"column":1663}},{"source":"stickerbook.js","name":"e","original":{"line":121,"column":18},"generated":{"line":1,"column":1664}},{"source":"stickerbook.js","original":{"line":122,"column":6},"generated":{"line":1,"column":1668}},{"source":"stickerbook.js","name":"img","original":{"line":122,"column":12},"generated":{"line":1,"column":1674}},{"source":"stickerbook.js","name":"e","original":{"line":122,"column":18},"generated":{"line":1,"column":1676}},{"source":"stickerbook.js","name":"target","original":{"line":122,"column":20},"generated":{"line":1,"column":1678}},{"source":"stickerbook.js","name":"width","original":{"line":123,"column":12},"generated":{"line":1,"column":1685}},{"source":"stickerbook.js","name":"img","original":{"line":123,"column":20},"generated":{"line":1,"column":1687}},{"source":"stickerbook.js","name":"width","original":{"line":123,"column":24},"generated":{"line":1,"column":1689}},{"source":"stickerbook.js","name":"height","original":{"line":124,"column":12},"generated":{"line":1,"column":1695}},{"source":"stickerbook.js","name":"img","original":{"line":124,"column":21},"generated":{"line":1,"column":1697}},{"source":"stickerbook.js","name":"height","original":{"line":124,"column":25},"generated":{"line":1,"column":1699}},{"source":"stickerbook.js","name":"setBackgroundDetails","original":{"line":126,"column":6},"generated":{"line":1,"column":1706}},{"source":"stickerbook.js","original":{"line":126,"column":27},"generated":{"line":1,"column":1708}},{"source":"stickerbook.js","name":"width","original":{"line":126,"column":29},"generated":{"line":1,"column":1709}},{"source":"stickerbook.js","name":"width","original":{"line":126,"column":29},"generated":{"line":1,"column":1715}},{"source":"stickerbook.js","name":"height","original":{"line":126,"column":36},"generated":{"line":1,"column":1717}},{"source":"stickerbook.js","name":"height","original":{"line":126,"column":36},"generated":{"line":1,"column":1724}},{"source":"stickerbook.js","name":"img","original":{"line":129,"column":4},"generated":{"line":1,"column":1730}},{"source":"stickerbook.js","name":"src","original":{"line":129,"column":8},"generated":{"line":1,"column":1732}},{"source":"stickerbook.js","name":"background","original":{"line":129,"column":14},"generated":{"line":1,"column":1736}},{"source":"stickerbook.js","name":"image","original":{"line":129,"column":25},"generated":{"line":1,"column":1738}},{"source":"stickerbook.js","original":{"line":130,"column":5},"generated":{"line":1,"column":1745}},{"source":"stickerbook.js","name":"background","original":{"line":130,"column":6},"generated":{"line":1,"column":1746}},{"source":"stickerbook.js","name":"image","original":{"line":130,"column":17},"generated":{"line":1,"column":1748}},{"source":"stickerbook.js","original":{"line":135,"column":4},"generated":{"line":1,"column":1757}},{"source":"stickerbook.js","name":"_preact","original":{"line":135,"column":4},"generated":{"line":1,"column":1759}},{"source":"stickerbook.js","name":"h","original":{"line":135,"column":4},"generated":{"line":1,"column":1761}},{"source":"stickerbook.js","name":"_extends","original":{"line":135,"column":4},"generated":{"line":1,"column":1764}},{"source":"stickerbook.js","name":"_extends","original":{"line":135,"column":4},"generated":{"line":1,"column":1770}},{"source":"stickerbook.js","original":{"line":135,"column":4},"generated":{"line":1,"column":1772}},{"source":"stickerbook.js","name":"role","original":{"line":136,"column":6},"generated":{"line":1,"column":1773}},{"source":"stickerbook.js","original":{"line":136,"column":11},"generated":{"line":1,"column":1778}},{"source":"stickerbook.js","original":{"line":137,"column":6},"generated":{"line":1,"column":1787}},{"source":"stickerbook.js","original":{"line":137,"column":17},"generated":{"line":1,"column":1800}},{"source":"stickerbook.js","name":"className","original":{"line":138,"column":6},"generated":{"line":1,"column":1814}},{"source":"stickerbook.js","original":{"line":138,"column":17},"generated":{"line":1,"column":1825}},{"source":"stickerbook.js","name":"classnames","original":{"line":138,"column":17},"generated":{"line":1,"column":1827}},{"source":"stickerbook.js","original":{"line":138,"column":27},"generated":{"line":1,"column":1829}},{"source":"stickerbook.js","original":{"line":138,"column":28},"generated":{"line":1,"column":1841}},{"source":"stickerbook.js","original":{"line":138,"column":29},"generated":{"line":1,"column":1842}},{"source":"stickerbook.js","name":"className","original":{"line":138,"column":44},"generated":{"line":1,"column":1856}},{"source":"stickerbook.js","name":"ref","original":{"line":139,"column":6},"generated":{"line":1,"column":1860}},{"source":"stickerbook.js","name":"parentRef","original":{"line":139,"column":11},"generated":{"line":1,"column":1864}},{"source":"stickerbook.js","name":"props","original":{"line":140,"column":10},"generated":{"line":1,"column":1867}},{"source":"stickerbook.js","original":{"line":142,"column":6},"generated":{"line":1,"column":1871}},{"source":"stickerbook.js","name":"_preact","original":{"line":142,"column":6},"generated":{"line":1,"column":1873}},{"source":"stickerbook.js","name":"h","original":{"line":142,"column":6},"generated":{"line":1,"column":1875}},{"source":"stickerbook.js","original":{"line":142,"column":6},"generated":{"line":1,"column":1878}},{"source":"stickerbook.js","original":{"line":142,"column":6},"generated":{"line":1,"column":1884}},{"source":"stickerbook.js","name":"ref","original":{"line":143,"column":8},"generated":{"line":1,"column":1885}},{"source":"stickerbook.js","name":"mainRef","original":{"line":143,"column":13},"generated":{"line":1,"column":1889}},{"source":"stickerbook.js","name":"style","original":{"line":144,"column":8},"generated":{"line":1,"column":1891}},{"source":"stickerbook.js","original":{"line":144,"column":15},"generated":{"line":1,"column":1897}},{"source":"stickerbook.js","name":"width","original":{"line":145,"column":10},"generated":{"line":1,"column":1898}},{"source":"stickerbook.js","name":"dimensions","original":{"line":145,"column":20},"generated":{"line":1,"column":1907}},{"source":"stickerbook.js","name":"width","original":{"line":145,"column":31},"generated":{"line":1,"column":1909}},{"source":"stickerbook.js","name":"height","original":{"line":146,"column":10},"generated":{"line":1,"column":1919}},{"source":"stickerbook.js","name":"dimensions","original":{"line":146,"column":21},"generated":{"line":1,"column":1929}},{"source":"stickerbook.js","name":"height","original":{"line":146,"column":32},"generated":{"line":1,"column":1931}},{"source":"stickerbook.js","name":"background","original":{"line":149,"column":9},"generated":{"line":1,"column":1944}},{"source":"stickerbook.js","name":"background","original":{"line":149,"column":23},"generated":{"line":1,"column":1947}},{"source":"stickerbook.js","name":"image","original":{"line":149,"column":34},"generated":{"line":1,"column":1949}},{"source":"stickerbook.js","original":{"line":150,"column":10},"generated":{"line":1,"column":1957}},{"source":"stickerbook.js","name":"_preact","original":{"line":150,"column":10},"generated":{"line":1,"column":1959}},{"source":"stickerbook.js","name":"h","original":{"line":150,"column":10},"generated":{"line":1,"column":1961}},{"source":"stickerbook.js","original":{"line":150,"column":10},"generated":{"line":1,"column":1964}},{"source":"stickerbook.js","original":{"line":150,"column":10},"generated":{"line":1,"column":1970}},{"source":"stickerbook.js","name":"role","original":{"line":151,"column":12},"generated":{"line":1,"column":1971}},{"source":"stickerbook.js","original":{"line":151,"column":17},"generated":{"line":1,"column":1976}},{"source":"stickerbook.js","name":"className","original":{"line":152,"column":12},"generated":{"line":1,"column":1982}},{"source":"stickerbook.js","original":{"line":152,"column":22},"generated":{"line":1,"column":1992}},{"source":"stickerbook.js","name":"style","original":{"line":153,"column":12},"generated":{"line":1,"column":2018}},{"source":"stickerbook.js","original":{"line":153,"column":19},"generated":{"line":1,"column":2024}},{"source":"stickerbook.js","name":"backgroundImage","original":{"line":154,"column":14},"generated":{"line":1,"column":2025}},{"source":"stickerbook.js","name":"background","original":{"line":154,"column":38},"generated":{"line":1,"column":2048}},{"source":"stickerbook.js","name":"image","original":{"line":154,"column":49},"generated":{"line":1,"column":2050}},{"source":"stickerbook.js","name":"backgroundStyles","original":{"line":155,"column":17},"generated":{"line":1,"column":2062}},{"source":"stickerbook.js","original":{"line":157,"column":12},"generated":{"line":1,"column":2065}},{"source":"stickerbook.js","name":"background","original":{"line":157,"column":24},"generated":{"line":1,"column":2078}},{"source":"stickerbook.js","name":"alt","original":{"line":157,"column":35},"generated":{"line":1,"column":2080}},{"source":"stickerbook.js","original":{"line":157,"column":42},"generated":{"line":1,"column":2085}},{"source":"stickerbook.js","name":"frame","original":{"line":161,"column":9},"generated":{"line":1,"column":2090}},{"source":"stickerbook.js","name":"frame","original":{"line":161,"column":18},"generated":{"line":1,"column":2093}},{"source":"stickerbook.js","name":"image","original":{"line":161,"column":24},"generated":{"line":1,"column":2095}},{"source":"stickerbook.js","original":{"line":162,"column":10},"generated":{"line":1,"column":2103}},{"source":"stickerbook.js","name":"_preact","original":{"line":162,"column":10},"generated":{"line":1,"column":2105}},{"source":"stickerbook.js","name":"h","original":{"line":162,"column":10},"generated":{"line":1,"column":2107}},{"source":"stickerbook.js","original":{"line":162,"column":10},"generated":{"line":1,"column":2110}},{"source":"stickerbook.js","original":{"line":162,"column":10},"generated":{"line":1,"column":2116}},{"source":"stickerbook.js","name":"src","original":{"line":163,"column":12},"generated":{"line":1,"column":2117}},{"source":"stickerbook.js","name":"frame","original":{"line":163,"column":17},"generated":{"line":1,"column":2121}},{"source":"stickerbook.js","name":"image","original":{"line":163,"column":23},"generated":{"line":1,"column":2123}},{"source":"stickerbook.js","name":"alt","original":{"line":164,"column":12},"generated":{"line":1,"column":2129}},{"source":"stickerbook.js","name":"frame","original":{"line":164,"column":17},"generated":{"line":1,"column":2133}},{"source":"stickerbook.js","name":"alt","original":{"line":164,"column":23},"generated":{"line":1,"column":2135}},{"source":"stickerbook.js","original":{"line":164,"column":30},"generated":{"line":1,"column":2140}},{"source":"stickerbook.js","name":"className","original":{"line":165,"column":12},"generated":{"line":1,"column":2143}},{"source":"stickerbook.js","original":{"line":165,"column":22},"generated":{"line":1,"column":2153}},{"source":"stickerbook.js","original":{"line":169,"column":8},"generated":{"line":1,"column":2177}},{"source":"stickerbook.js","name":"_preact","original":{"line":169,"column":8},"generated":{"line":1,"column":2179}},{"source":"stickerbook.js","name":"h","original":{"line":169,"column":8},"generated":{"line":1,"column":2181}},{"source":"stickerbook.js","name":"StickerbookContext","original":{"line":169,"column":9},"generated":{"line":1,"column":2184}},{"source":"stickerbook.js","name":"Provider","original":{"line":169,"column":28},"generated":{"line":1,"column":2186}},{"source":"stickerbook.js","original":{"line":169,"column":36},"generated":{"line":1,"column":2195}},{"source":"stickerbook.js","name":"value","original":{"line":170,"column":10},"generated":{"line":1,"column":2196}},{"source":"stickerbook.js","original":{"line":170,"column":17},"generated":{"line":1,"column":2202}},{"source":"stickerbook.js","name":"parentRef","original":{"line":171,"column":12},"generated":{"line":1,"column":2203}},{"source":"stickerbook.js","name":"parentRef","original":{"line":171,"column":23},"generated":{"line":1,"column":2213}},{"source":"stickerbook.js","name":"current","original":{"line":171,"column":33},"generated":{"line":1,"column":2215}},{"source":"stickerbook.js","name":"mainRef","original":{"line":172,"column":12},"generated":{"line":1,"column":2223}},{"source":"stickerbook.js","name":"mainRef","original":{"line":172,"column":21},"generated":{"line":1,"column":2231}},{"source":"stickerbook.js","name":"current","original":{"line":172,"column":29},"generated":{"line":1,"column":2233}},{"source":"stickerbook.js","name":"position","original":{"line":173,"column":12},"generated":{"line":1,"column":2241}},{"source":"stickerbook.js","name":"position","original":{"line":173,"column":12},"generated":{"line":1,"column":2250}},{"source":"stickerbook.js","name":"dimensions","original":{"line":174,"column":12},"generated":{"line":1,"column":2252}},{"source":"stickerbook.js","name":"dimensions","original":{"line":174,"column":12},"generated":{"line":1,"column":2263}},{"source":"stickerbook.js","name":"dimensions","original":{"line":177,"column":11},"generated":{"line":1,"column":2267}},{"source":"stickerbook.js","name":"rendered","original":{"line":177,"column":22},"generated":{"line":1,"column":2269}},{"source":"stickerbook.js","name":"children","original":{"line":177,"column":34},"generated":{"line":1,"column":2279}},{"source":"stickerbook.js","name":"foreground","original":{"line":180,"column":9},"generated":{"line":1,"column":2282}},{"source":"stickerbook.js","name":"foreground","original":{"line":180,"column":23},"generated":{"line":1,"column":2285}},{"source":"stickerbook.js","name":"image","original":{"line":180,"column":34},"generated":{"line":1,"column":2287}},{"source":"stickerbook.js","original":{"line":181,"column":10},"generated":{"line":1,"column":2295}},{"source":"stickerbook.js","name":"_preact","original":{"line":181,"column":10},"generated":{"line":1,"column":2297}},{"source":"stickerbook.js","name":"h","original":{"line":181,"column":10},"generated":{"line":1,"column":2299}},{"source":"stickerbook.js","original":{"line":181,"column":10},"generated":{"line":1,"column":2302}},{"source":"stickerbook.js","original":{"line":181,"column":10},"generated":{"line":1,"column":2308}},{"source":"stickerbook.js","name":"src","original":{"line":182,"column":12},"generated":{"line":1,"column":2309}},{"source":"stickerbook.js","name":"foreground","original":{"line":182,"column":17},"generated":{"line":1,"column":2313}},{"source":"stickerbook.js","name":"image","original":{"line":182,"column":28},"generated":{"line":1,"column":2315}},{"source":"stickerbook.js","name":"alt","original":{"line":183,"column":12},"generated":{"line":1,"column":2321}},{"source":"stickerbook.js","name":"foreground","original":{"line":183,"column":17},"generated":{"line":1,"column":2325}},{"source":"stickerbook.js","name":"alt","original":{"line":183,"column":28},"generated":{"line":1,"column":2327}},{"source":"stickerbook.js","original":{"line":183,"column":35},"generated":{"line":1,"column":2332}},{"source":"stickerbook.js","name":"className","original":{"line":184,"column":12},"generated":{"line":1,"column":2335}},{"source":"stickerbook.js","original":{"line":184,"column":22},"generated":{"line":1,"column":2345}},{"source":"stickerbook.js","name":"style","original":{"line":185,"column":12},"generated":{"line":1,"column":2371}},{"source":"stickerbook.js","original":{"line":185,"column":19},"generated":{"line":1,"column":2377}},{"source":"stickerbook.js","name":"zIndex","original":{"line":185,"column":21},"generated":{"line":1,"column":2378}},{"source":"stickerbook.js","name":"foregroundIndex","original":{"line":185,"column":29},"generated":{"line":1,"column":2385}},{"source":"stickerbook.js","name":"exports","original":{"line":16,"column":50},"generated":{"line":1,"column":2392}},{"source":"stickerbook.js","name":"StickerbookContext","original":{"line":16,"column":50},"generated":{"line":1,"column":2400}},{"source":"stickerbook.js","name":"StickerbookContext","original":{"line":16,"column":50},"generated":{"line":1,"column":2419}}],"sources":{"stickerbook.js":"import { h, createContext } from \"preact\";\nimport {\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"preact/hooks\";\nimport { Vec2 } from \"wtc-math\";\n\nimport { classnames } from \"./helpers\";\n\n// if in the future we have the need to have two\n// stickerbook components rendering, I think\n// we might be able to make this a scoped function\nexport const StickerbookContext = createContext();\n\nexport default function Stickerbook({\n  background = {},\n  foreground = {},\n  frame = {},\n  outputHeight = 500,\n  outputWidth = 500,\n  children,\n  className,\n  ...props\n}) {\n  const [dimensions, setDimensions] = useState({\n    width: outputWidth,\n    height: outputHeight,\n    percentageShift: 1,\n    rendered: false,\n  });\n  const [position, setPosition] = useState();\n  const [backgroundDetails, setBackgroundDetails] = useState({});\n  const mainRef = useRef();\n  const parentRef = useRef();\n  const foregroundIndex = useMemo(\n    () => (children ? children.flat().length + 2 : 2),\n    [children]\n  );\n\n  const backgroundStyles = useMemo(() => {\n    if (background.type === \"scene\") return {};\n\n    // calculate new size based on generated image\n    // backgrounds should be generated by designers\n    // and they should base themselves on the size of the stickerbook\n    const bgSize = (backgroundDetails.width * dimensions.width) / outputWidth;\n\n    return {\n      backgroundRepeat: \"repeat\",\n      backgroundSize: `${bgSize}px auto`,\n    };\n  }, [backgroundDetails.width, dimensions.width, background.type, outputWidth]);\n\n  // when the node renders and also when we force resize\n  useLayoutEffect(() => {\n    const element = mainRef.current;\n    const parent = parentRef.current;\n    let resizeTimer, scrollTimer;\n\n    const getPosition = function () {\n      const rect = element.getBoundingClientRect();\n\n      return new Vec2(rect.left, rect.top);\n    };\n\n    const onResize = function (init) {\n      if (!element) return;\n      clearTimeout(resizeTimer);\n\n      resizeTimer = setTimeout(() => {\n        const newWidth = parent.offsetWidth;\n        const curWidth = element.offsetWidth;\n\n        setPosition(getPosition());\n\n        if (newWidth !== curWidth || init === true)\n          setDimensions((cur) => {\n            return {\n              width: newWidth,\n              height: (element.offsetHeight / curWidth) * newWidth,\n              percentageShift: newWidth / cur.width,\n              rendered: true,\n            };\n          });\n      }, 300);\n    };\n\n    const onScroll = function () {\n      if (!element) return;\n      clearTimeout(scrollTimer);\n\n      scrollTimer = setInterval(() => {\n        setPosition(getPosition());\n      }, 300);\n    };\n\n    window.addEventListener(\"resize\", onResize);\n    window.addEventListener(\"scroll\", onScroll);\n\n    onResize(true);\n\n    return () => {\n      clearTimeout(resizeTimer);\n      clearTimeout(scrollTimer);\n\n      window.removeEventListener(\"resize\", onResize);\n      window.removeEventListener(\"scroll\", onScroll);\n    };\n  }, []);\n\n  // when background changes, we load the image\n  // and save the original size\n  useEffect(() => {\n    if (!background.image) return;\n\n    const img = new Image();\n\n    img.onload = (e) => {\n      const img = e.target;\n      const width = img.width;\n      const height = img.height;\n\n      setBackgroundDetails({ width, height });\n    };\n\n    img.src = background.image;\n  }, [background.image]);\n\n  return (\n    // this first div is fluid and will help us get the dimensions\n    // for the stickerbook itself\n    <div\n      role=\"region\"\n      aria-label=\"Stickerbook\"\n      className={classnames([\"Stickerbook\", className])}\n      ref={parentRef}\n      {...props}\n    >\n      <div\n        ref={mainRef}\n        style={{\n          width: `${dimensions.width}px`,\n          height: `${dimensions.height}px`,\n        }}\n      >\n        {background && background.image && (\n          <div\n            role=\"img\"\n            className=\"Stickerbook__background\"\n            style={{\n              backgroundImage: `url(${background.image})`,\n              ...backgroundStyles,\n            }}\n            aria-label={background.alt || \"\"}\n          />\n        )}\n\n        {frame && frame.image && (\n          <img\n            src={frame.image}\n            alt={frame.alt || \"\"}\n            className=\"Stickerbook__frame\"\n          />\n        )}\n\n        <StickerbookContext.Provider\n          value={{\n            parentRef: parentRef.current,\n            mainRef: mainRef.current,\n            position,\n            dimensions,\n          }}\n        >\n          {dimensions.rendered && children}\n        </StickerbookContext.Provider>\n\n        {foreground && foreground.image && (\n          <img\n            src={foreground.image}\n            alt={foreground.alt || \"\"}\n            className=\"Stickerbook__foreground\"\n            style={{ zIndex: foregroundIndex }}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n"},"lineCount":null}},"error":null,"hash":"a0132db6124f4ef07dfe3dea7b927833","cacheData":{"env":{}}}